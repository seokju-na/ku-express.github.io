{"version":3,"sources":["webpack:///webpack/bootstrap c1952b890b72fbd4bcb0","webpack:///./src/vr/utils.js","webpack:///./src/roller-coaster/index.js","webpack:///./src/vr/control.js","webpack:///./src/vr/effect.js","webpack:///./src/main.js","webpack:///./src/roller-coaster/roller-coaster.js","webpack:///./src/roller-coaster-lifter/index.js","webpack:///./src/roller-coaster-lifter/geometry.js","webpack:///./src/roller-coaster-shadow/index.js","webpack:///./src/roller-coaster-shadow/geometry.js","webpack:///./src/ground/index.js"],"names":["isWebVRAvailable","navigator","getVRDisplays","undefined","getVRDisplay","callback","then","displays","catch","error","getHelpMessageElement","makeMessageElement","message","container","document","createElement","style","position","left","top","right","zIndex","align","fontFamily","fontSize","fontStyle","lineHeight","backgroundColor","color","padding","margin","display","innerHTML","appendChild","err","vrDisplay","getButton","canvas","button","bottom","width","border","cursor","textAlign","textContent","onclick","onButtonClick","isPresenting","exitPresent","requestPresent","source","window","addEventListener","rollerCoasterMeshFactory","curve","divisions","geometry","material","THREE","MeshPhongMaterial","vertexColors","VertexColors","Mesh","VRControl","constructor","object","standingMatrix","Matrix4","scale","standing","userHeight","frameData","init","onError","VRFrameData","console","warn","setVRDisplay","value","getStandingMaxtrix","update","getFrameData","pose","orientation","quaternion","fromArray","set","stageParameters","updateMatrix","sittingToStandingTransform","applyMatrix","setY","y","dispose","VREffect","renderer","vrDisplays","eyeTranslationL","Vector3","eyeTranslationR","renderRectL","renderRectR","gotVRDisplays","length","scope","rendererSize","getSize","rendererUpdateStyle","rendererPixelRatio","getPixelRatio","setSize","height","updateStyle","eyeParamsL","getEyeParameters","setPixelRatio","renderWidth","renderHeight","domElement","defaultLeftBounds","defaultRightBounds","onVRDisplayPresentChange","wasPresenting","eyeWidth","eyeHeight","setFullScreen","boolean","Promise","resolve","reject","Error","requestAnimationFrame","f","cancelAnimationFrame","h","submitFrame","autoSubmitFrame","cameraL","PerspectiveCamera","layers","enable","cameraR","render","scene","camera","renderTarget","forceClear","autoUpdate","updateMatrixWorld","eyeParamsR","offset","Array","isArray","size","getLayers","leftBounds","rightBounds","layer","x","Math","round","setRenderTarget","scissorTest","setScissorTest","autoClear","clear","parent","matrixWorld","decompose","copy","translateOnAxis","depthNear","near","depthFar","far","projectionMatrix","elements","leftProjectionMatrix","rightProjectionMatrix","fovToProjection","fieldOfView","viewport","scissor","setViewport","setScissor","removeEventListener","fovToNDCScaleOffset","fov","pxscale","leftTan","rightTan","pxoffset","pyscale","upTan","downTan","pyoffset","fovPortToProjection","rightHanded","zNear","zFar","handednessScale","mobj","m","scaleAndOffset","transpose","DEG2RAD","PI","fovPort","tan","upDegrees","downDegrees","leftDegrees","rightDegrees","vrUtils","element","body","WebGLRenderer","antialias","setClearColor","devicePixelRatio","innerWidth","innerHeight","Scene","light","HemisphereLight","add","train","Object3D","PI2","v1","v2","getPointAt","t","p","sin","cos","z","multiplyScalar","getTangentAt","delta","t1","max","t2","min","sub","normalize","rollerCoasterMesh","rollerCoasterLifterMesh","rollerCoasterLifterMeshFactory","rollerCoasterShadowMesh","rollerCoasterShadowMeshFactory","groundMeshFactory","background","CubeTextureLoader","setPath","load","control","effect","buttonElem","aspect","updateProjectionMatrix","tangent","lookAt","velocity","progress","prevTime","performance","now","animate","time","RollerCoasterGeometry","BufferGeometry","call","vertices","normals","colors","color1","color2","up","forward","Quaternion","prevQuaternion","setFromAxisAngle","point","prevPoint","step","step1","i","angle","push","sides","tube1","tube2","vector","normal","drawShape","shape","applyQuaternion","j","vector1","vector2","vector3","vector4","normal1","normal2","normal3","normal4","extrudeShape","jl","point1","point2","extrudeShapeSide","fromPoint","toPoint","subVectors","crossVectors","atan2","addAttribute","BufferAttribute","Float32Array","prototype","Object","create","mesh","RollerCoasterLiftersGeometry","tube3","MeshBasicMaterial","depthWrite","transparent","RollerCoasterShadowGeometry","PlaneBufferGeometry","makeRotationX","positions","attributes","array","vertex","random","distance","distanceTo","toArray","computeVertexNormals","MeshLambertMaterial"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;AChEO,SAASA,gBAAT,GAA4B;AAC/B,WAAOC,UAAUC,aAAV,KAA4BC,SAAnC;AACH;;AAEM,SAASC,YAAT,CAAsBC,QAAtB,EAAgC;AACnC,QAAI,CAACL,kBAAL,EAAyB;AACrBK,iBAAS,gCAAT,EAA2C,IAA3C;AACA;AACH;;AAEDJ,cACKC,aADL,GAEKI,IAFL,CAEWC,QAAD,IAAc;AAChBF,iBAAS,IAAT,EAAeE,SAAS,CAAT,CAAf;AACH,KAJL,EAKKC,KALL,CAKYC,KAAD,IAAW;AACdJ,iBAASI,KAAT,EAAgB,IAAhB;AACH,KAPL;AAQH;;AAEM,SAASC,qBAAT,CAA+BL,QAA/B,EAAyC;AAC5C,UAAMM,qBAAsBC,OAAD,IAAa;AACpC,cAAMC,YAAYC,SAASC,aAAT,CAAuB,KAAvB,CAAlB;AACAF,kBAAUG,KAAV,CAAgBC,QAAhB,GAA2B,UAA3B;AACAJ,kBAAUG,KAAV,CAAgBE,IAAhB,GAAuB,GAAvB;AACAL,kBAAUG,KAAV,CAAgBG,GAAhB,GAAsB,GAAtB;AACAN,kBAAUG,KAAV,CAAgBI,KAAhB,GAAwB,GAAxB;AACAP,kBAAUG,KAAV,CAAgBK,MAAhB,GAAyB,KAAzB;AACAR,kBAAUS,KAAV,GAAkB,QAAlB;;AAEA,cAAMb,QAAQK,SAASC,aAAT,CAAuB,KAAvB,CAAd;AACAN,cAAMO,KAAN,CAAYO,UAAZ,GAAyB,YAAzB;AACAd,cAAMO,KAAN,CAAYQ,QAAZ,GAAuB,MAAvB;AACAf,cAAMO,KAAN,CAAYS,SAAZ,GAAwB,QAAxB;AACAhB,cAAMO,KAAN,CAAYU,UAAZ,GAAyB,MAAzB;AACAjB,cAAMO,KAAN,CAAYW,eAAZ,GAA8B,MAA9B;AACAlB,cAAMO,KAAN,CAAYY,KAAZ,GAAoB,MAApB;AACAnB,cAAMO,KAAN,CAAYa,OAAZ,GAAsB,WAAtB;AACApB,cAAMO,KAAN,CAAYc,MAAZ,GAAqB,MAArB;AACArB,cAAMO,KAAN,CAAYe,OAAZ,GAAsB,cAAtB;AACAtB,cAAMuB,SAAN,GAAkBpB,OAAlB;AACAC,kBAAUoB,WAAV,CAAsBxB,KAAtB;;AAEAJ,iBAASQ,SAAT;AACH,KAvBD;;AAyBAT,iBAAa,CAAC8B,GAAD,EAAMC,SAAN,KAAoB;AAC7B,YAAID,GAAJ,EAAS;AACLvB,+BAAmB,qGAAnB;AACH,SAFD,MAEO,IAAI,CAACwB,SAAL,EAAgB;AACnBxB,+BAAmB,2CAAnB;AACH,SAFM,MAEA;AACHN,qBAAS,IAAT;AACH;AACJ,KARD;AASH;;AAEM,SAAS+B,SAAT,CAAmBL,OAAnB,EAA4BM,MAA5B,EAAoC;AACvC,UAAMC,SAASxB,SAASC,aAAT,CAAuB,QAAvB,CAAf;AACAuB,WAAOtB,KAAP,CAAaC,QAAb,GAAwB,UAAxB;AACAqB,WAAOtB,KAAP,CAAaE,IAAb,GAAoB,kBAApB;AACAoB,WAAOtB,KAAP,CAAauB,MAAb,GAAsB,MAAtB;AACAD,WAAOtB,KAAP,CAAawB,KAAb,GAAqB,OAArB;AACAF,WAAOtB,KAAP,CAAayB,MAAb,GAAsB,GAAtB;AACAH,WAAOtB,KAAP,CAAaa,OAAb,GAAuB,KAAvB;AACAS,WAAOtB,KAAP,CAAa0B,MAAb,GAAsB,SAAtB;AACAJ,WAAOtB,KAAP,CAAaW,eAAb,GAA+B,MAA/B;AACAW,WAAOtB,KAAP,CAAaY,KAAb,GAAqB,MAArB;AACAU,WAAOtB,KAAP,CAAaO,UAAb,GAA0B,YAA1B;AACAe,WAAOtB,KAAP,CAAaQ,QAAb,GAAwB,MAAxB;AACAc,WAAOtB,KAAP,CAAaS,SAAb,GAAyB,QAAzB;AACAa,WAAOtB,KAAP,CAAa2B,SAAb,GAAyB,QAAzB;AACAL,WAAOtB,KAAP,CAAaK,MAAb,GAAsB,KAAtB;;AAEA,QAAIU,OAAJ,EAAa;AACTO,eAAOM,WAAP,GAAqB,UAArB;AACAN,eAAOO,OAAP,GAAiB,SAASC,aAAT,GAAyB;AACtCf,oBAAQgB,YAAR,GAAuBhB,QAAQiB,WAAR,EAAvB,GAA+CjB,QAAQkB,cAAR,CAAuB,CAAC,EAAEC,QAAQb,MAAV,EAAD,CAAvB,CAA/C;AACH,SAFD;;AAIAc,eAAOC,gBAAP,CAAwB,wBAAxB,EAAkD,MAAM;AACpDd,mBAAOM,WAAP,GAAqBb,QAAQgB,YAAR,GAAuB,SAAvB,GAAmC,UAAxD;AACH,SAFD;AAGH,KATD,MASO;AACHT,eAAOM,WAAP,GAAqB,eAArB;AACH;;AAED,WAAON,MAAP;AACH,C;;;;;;;;;ACxFD;;AAEO,SAASe,wBAAT,CAAkCC,KAAlC,EAAyCC,SAAzC,EAAoD;AACvD,UAAMC,WAAW,IAAI,gEAAJ,CAA0BF,KAA1B,EAAiCC,SAAjC,CAAjB;AACA,UAAME,WAAW,IAAIC,MAAMC,iBAAV,CAA4B;AACzCC,sBAAcF,MAAMG;AADqB,KAA5B,CAAjB;;AAIA,WAAO,IAAIH,MAAMI,IAAV,CAAeN,QAAf,EAAyBC,QAAzB,CAAP;AACH,C;;;;;;;;;ACTD;;AAEA,MAAMM,SAAN,CAAgB;AACZC,gBAAYC,MAAZ,EAAoB;AAChB,aAAKA,MAAL,GAAcA,MAAd;;AAEA,aAAKC,cAAL,GAAsB,IAAIR,MAAMS,OAAV,EAAtB;AACA,aAAKC,KAAL,GAAa,CAAb;AACA,aAAKC,QAAL,GAAgB,KAAhB;AACA,aAAKC,UAAL,GAAkB,GAAlB;AACA,aAAKC,SAAL,GAAiB,IAAjB;AACH;;AAEDC,SAAKC,OAAL,EAAc;AACV,YAAI,iBAAiBtB,MAArB,EAA6B;AACzB,iBAAKoB,SAAL,GAAiB,IAAIpB,OAAOuB,WAAX,EAAjB;AACH;;AAED,YAAI,uFAAA1E,EAAJ,EAAwB;AACpBI,YAAA,mFAAAA,CAAa,CAAC8B,GAAD,EAAMC,SAAN,KAAoB;AAC7B,oBAAID,GAAJ,EAAS;AACLyC,4BAAQC,IAAR,CAAa1C,GAAb;AACH,iBAFD,MAEO,IAAI,CAACC,SAAL,EAAgB;AACnBsC,4BAAQ,yBAAR;AACH,iBAFM,MAEA;AACH,yBAAKtC,SAAL,GAAiBA,SAAjB;AACH;AACJ,aARD;AASH;AACJ;;AAED/B,mBAAe;AACX,eAAO,KAAK+B,SAAZ;AACH;;AAED0C,iBAAaC,KAAb,EAAoB;AAChB,aAAK3C,SAAL,GAAiB2C,KAAjB;AACH;;AAEDC,yBAAqB;AACjB,eAAO,KAAKb,cAAZ;AACH;;AAEDc,aAAS;AACL,YAAI,CAAC,KAAK7C,SAAV,EAAqB;AACjB;AACH;;AAED,aAAKA,SAAL,CAAe8C,YAAf,CAA4B,KAAKV,SAAjC;;AAEA,cAAMW,OAAO,KAAKX,SAAL,CAAeW,IAA5B;;AAEA,YAAIA,KAAKC,WAAL,KAAqB,IAAzB,EAA+B;AAC3B,iBAAKlB,MAAL,CAAYmB,UAAZ,CAAuBC,SAAvB,CAAiCH,KAAKC,WAAtC;AACH;;AAED,YAAID,KAAKjE,QAAL,KAAkB,IAAtB,EAA4B;AACxB,iBAAKgD,MAAL,CAAYhD,QAAZ,CAAqBoE,SAArB,CAA+BH,KAAKjE,QAApC;AACH,SAFD,MAEO;AACH,iBAAKgD,MAAL,CAAYhD,QAAZ,CAAqBqE,GAArB,CAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B;AACH;;AAED,YAAI,KAAKjB,QAAT,EAAmB;AACf,gBAAI,KAAKlC,SAAL,CAAeoD,eAAnB,EAAoC;AAChC,qBAAKtB,MAAL,CAAYuB,YAAZ;AACA,qBAAKtB,cAAL,CAAoBmB,SAApB,CAA8B,KAAKlD,SAAL,CAAeoD,eAAf,CAA+BE,0BAA7D;AACA,qBAAKxB,MAAL,CAAYyB,WAAZ,CAAwB,KAAKxB,cAA7B;AACH,aAJD,MAIO;AACH,qBAAKD,MAAL,CAAYhD,QAAZ,CAAqB0E,IAArB,CAA0B,KAAK1B,MAAL,CAAYhD,QAAZ,CAAqB2E,CAArB,GAAyB,KAAKtB,UAAxD;AACH;AACJ;AACJ;;AAEDuB,cAAU;AACN,aAAK1D,SAAL,GAAiB,IAAjB;AACH;AAzEW;;AA4EhB,yDAAe4B,SAAf,E;;;;;;;AC9EA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4NA,SAAS+B,QAAT,CAAkBC,QAAlB,EAA4BtB,OAA5B,EAAqC;;AAEjC,QAAItC,SAAJ,EAAe6D,UAAf;AACA,QAAIC,kBAAkB,IAAIvC,MAAMwC,OAAV,EAAtB;AACA,QAAIC,kBAAkB,IAAIzC,MAAMwC,OAAV,EAAtB;AACA,QAAIE,WAAJ,EAAiBC,WAAjB;;AAEA,QAAI9B,YAAY,IAAhB;;AAEA,QAAI,iBAAiBpB,MAArB,EAA6B;;AAEzBoB,oBAAY,IAAIpB,OAAOuB,WAAX,EAAZ;AAEH;;AAED,aAAS4B,aAAT,CAAuB/F,QAAvB,EAAiC;;AAE7ByF,qBAAazF,QAAb;;AAEA,YAAIA,SAASgG,MAAT,GAAkB,CAAtB,EAAyB;;AAErBpE,wBAAY5B,SAAS,CAAT,CAAZ;AAEH,SAJD,MAIO;;AAEH,gBAAIkE,OAAJ,EAAaA,QAAQ,mBAAR;AAEhB;AAEJ;;AAED,QAAIxE,UAAUC,aAAd,EAA6B;;AAEzBD,kBAAUC,aAAV,GAA0BI,IAA1B,CAA+BgG,aAA/B,EAA8C9F,KAA9C,CAAoD,YAAY;;AAE5DmE,oBAAQC,IAAR,CAAa,2CAAb;AAEH,SAJD;AAMH;;AAED;;AAEA,SAAK7B,YAAL,GAAoB,KAApB;;AAEA,QAAIyD,QAAQ,IAAZ;;AAEA,QAAIC,eAAeV,SAASW,OAAT,EAAnB;AACA,QAAIC,sBAAsB,KAA1B;AACA,QAAIC,qBAAqBb,SAASc,aAAT,EAAzB;;AAEA,SAAKzG,YAAL,GAAoB,YAAY;;AAE5B,eAAO+B,SAAP;AAEH,KAJD;;AAMA,SAAK0C,YAAL,GAAoB,UAAUC,KAAV,EAAiB;;AAEjC3C,oBAAY2C,KAAZ;AAEH,KAJD;;AAMA,SAAK5E,aAAL,GAAqB,YAAY;;AAE7ByE,gBAAQC,IAAR,CAAa,sDAAb;AACA,eAAOoB,UAAP;AAEH,KALD;;AAOA,SAAKc,OAAL,GAAe,UAAUtE,KAAV,EAAiBuE,MAAjB,EAAyBC,WAAzB,EAAsC;;AAEjDP,uBAAe,EAACjE,OAAOA,KAAR,EAAeuE,QAAQA,MAAvB,EAAf;AACAJ,8BAAsBK,WAAtB;;AAEA,YAAIR,MAAMzD,YAAV,EAAwB;;AAEpB,gBAAIkE,aAAa9E,UAAU+E,gBAAV,CAA2B,MAA3B,CAAjB;AACAnB,qBAASoB,aAAT,CAAuB,CAAvB;AACApB,qBAASe,OAAT,CAAiBG,WAAWG,WAAX,GAAyB,CAA1C,EAA6CH,WAAWI,YAAxD,EAAsE,KAAtE;AAEH,SAND,MAMO;;AAEHtB,qBAASoB,aAAT,CAAuBP,kBAAvB;AACAb,qBAASe,OAAT,CAAiBtE,KAAjB,EAAwBuE,MAAxB,EAAgCC,WAAhC;AAEH;AAEJ,KAlBD;;AAoBA;;AAEA,QAAI3E,SAAS0D,SAASuB,UAAtB;AACA,QAAIC,oBAAoB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,CAAxB;AACA,QAAIC,qBAAqB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,CAAzB;;AAEA,aAASC,wBAAT,GAAoC;;AAEhC,YAAIC,gBAAgBlB,MAAMzD,YAA1B;AACAyD,cAAMzD,YAAN,GAAqBZ,cAAchC,SAAd,IAA2BgC,UAAUY,YAA1D;;AAEA,YAAIyD,MAAMzD,YAAV,EAAwB;;AAEpB,gBAAIkE,aAAa9E,UAAU+E,gBAAV,CAA2B,MAA3B,CAAjB;AACA,gBAAIS,WAAWV,WAAWG,WAA1B;AACA,gBAAIQ,YAAYX,WAAWI,YAA3B;;AAEA,gBAAI,CAACK,aAAL,EAAoB;;AAEhBd,qCAAqBb,SAASc,aAAT,EAArB;AACAJ,+BAAeV,SAASW,OAAT,EAAf;;AAEAX,yBAASoB,aAAT,CAAuB,CAAvB;AACApB,yBAASe,OAAT,CAAiBa,WAAW,CAA5B,EAA+BC,SAA/B,EAA0C,KAA1C;AAEH;AAEJ,SAhBD,MAgBO,IAAIF,aAAJ,EAAmB;;AAEtB3B,qBAASoB,aAAT,CAAuBP,kBAAvB;AACAb,qBAASe,OAAT,CAAiBL,aAAajE,KAA9B,EAAqCiE,aAAaM,MAAlD,EAA0DJ,mBAA1D;AAEH;AAEJ;;AAEDxD,WAAOC,gBAAP,CAAwB,wBAAxB,EAAkDqE,wBAAlD,EAA4E,KAA5E;;AAEA,SAAKI,aAAL,GAAqB,UAAUC,OAAV,EAAmB;;AAEpC,eAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;;AAE1C,gBAAI9F,cAAchC,SAAlB,EAA6B;;AAEzB8H,uBAAO,IAAIC,KAAJ,CAAU,uBAAV,CAAP;AACA;AAEH;;AAED,gBAAI1B,MAAMzD,YAAN,KAAuB+E,OAA3B,EAAoC;;AAEhCE;AACA;AAEH;;AAED,gBAAIF,OAAJ,EAAa;;AAETE,wBAAQ7F,UAAUc,cAAV,CAAyB,CAAC,EAACC,QAAQb,MAAT,EAAD,CAAzB,CAAR;AAEH,aAJD,MAIO;;AAEH2F,wBAAQ7F,UAAUa,WAAV,EAAR;AAEH;AAEJ,SA1BM,CAAP;AA4BH,KA9BD;;AAgCA,SAAKC,cAAL,GAAsB,YAAY;;AAE9B,eAAO,KAAK4E,aAAL,CAAmB,IAAnB,CAAP;AAEH,KAJD;;AAMA,SAAK7E,WAAL,GAAmB,YAAY;;AAE3B,eAAO,KAAK6E,aAAL,CAAmB,KAAnB,CAAP;AAEH,KAJD;;AAMA,SAAKM,qBAAL,GAA6B,UAAUC,CAAV,EAAa;;AAEtC,YAAIjG,cAAchC,SAAlB,EAA6B;;AAEzB,mBAAOgC,UAAUgG,qBAAV,CAAgCC,CAAhC,CAAP;AAEH,SAJD,MAIO;;AAEH,mBAAOjF,OAAOgF,qBAAP,CAA6BC,CAA7B,CAAP;AAEH;AAEJ,KAZD;;AAcA,SAAKC,oBAAL,GAA4B,UAAUC,CAAV,EAAa;;AAErC,YAAInG,cAAchC,SAAlB,EAA6B;;AAEzBgC,sBAAUkG,oBAAV,CAA+BC,CAA/B;AAEH,SAJD,MAIO;;AAEHnF,mBAAOkF,oBAAP,CAA4BC,CAA5B;AAEH;AAEJ,KAZD;;AAcA,SAAKC,WAAL,GAAmB,YAAY;;AAE3B,YAAIpG,cAAchC,SAAd,IAA2BqG,MAAMzD,YAArC,EAAmD;;AAE/CZ,sBAAUoG,WAAV;AAEH;AAEJ,KARD;;AAUA,SAAKC,eAAL,GAAuB,IAAvB;;AAEA;;AAEA,QAAIC,UAAU,IAAI/E,MAAMgF,iBAAV,EAAd;AACAD,YAAQE,MAAR,CAAeC,MAAf,CAAsB,CAAtB;;AAEA,QAAIC,UAAU,IAAInF,MAAMgF,iBAAV,EAAd;AACAG,YAAQF,MAAR,CAAeC,MAAf,CAAsB,CAAtB;;AAEA,SAAKE,MAAL,GAAc,UAAUC,KAAV,EAAiBC,MAAjB,EAAyBC,YAAzB,EAAuCC,UAAvC,EAAmD;;AAE7D,YAAI/G,aAAaqE,MAAMzD,YAAvB,EAAqC;;AAEjC,gBAAIoG,aAAaJ,MAAMI,UAAvB;;AAEA,gBAAIA,UAAJ,EAAgB;;AAEZJ,sBAAMK,iBAAN;AACAL,sBAAMI,UAAN,GAAmB,KAAnB;AAEH;;AAED,gBAAIlC,aAAa9E,UAAU+E,gBAAV,CAA2B,MAA3B,CAAjB;AACA,gBAAImC,aAAalH,UAAU+E,gBAAV,CAA2B,OAA3B,CAAjB;;AAEAjB,4BAAgBZ,SAAhB,CAA0B4B,WAAWqC,MAArC;AACAnD,4BAAgBd,SAAhB,CAA0BgE,WAAWC,MAArC;;AAEA,gBAAIC,MAAMC,OAAN,CAAcT,KAAd,CAAJ,EAA0B;;AAEtBpE,wBAAQC,IAAR,CAAa,+EAAb;AACAmE,wBAAQA,MAAM,CAAN,CAAR;AAEH;;AAED;AACA;AACA,gBAAIU,OAAO1D,SAASW,OAAT,EAAX;AACA,gBAAIiC,SAASxG,UAAUuH,SAAV,EAAb;AACA,gBAAIC,UAAJ;AACA,gBAAIC,WAAJ;;AAEA,gBAAIjB,OAAOpC,MAAX,EAAmB;;AAEf,oBAAIsD,QAAQlB,OAAO,CAAP,CAAZ;;AAEAgB,6BAAaE,MAAMF,UAAN,KAAqB,IAArB,IAA6BE,MAAMF,UAAN,CAAiBpD,MAAjB,KAA4B,CAAzD,GAA6DsD,MAAMF,UAAnE,GAAgFpC,iBAA7F;AACAqC,8BAAcC,MAAMD,WAAN,KAAsB,IAAtB,IAA8BC,MAAMD,WAAN,CAAkBrD,MAAlB,KAA6B,CAA3D,GAA+DsD,MAAMD,WAArE,GAAmFpC,kBAAjG;AAEH,aAPD,MAOO;;AAEHmC,6BAAapC,iBAAb;AACAqC,8BAAcpC,kBAAd;AAEH;;AAEDpB,0BAAc;AACV0D,mBAAGC,KAAKC,KAAL,CAAWP,KAAKjH,KAAL,GAAamH,WAAW,CAAX,CAAxB,CADO;AAEV/D,mBAAGmE,KAAKC,KAAL,CAAWP,KAAK1C,MAAL,GAAc4C,WAAW,CAAX,CAAzB,CAFO;AAGVnH,uBAAOuH,KAAKC,KAAL,CAAWP,KAAKjH,KAAL,GAAamH,WAAW,CAAX,CAAxB,CAHG;AAIV5C,wBAAQgD,KAAKC,KAAL,CAAWP,KAAK1C,MAAL,GAAc4C,WAAW,CAAX,CAAzB;AAJE,aAAd;AAMAtD,0BAAc;AACVyD,mBAAGC,KAAKC,KAAL,CAAWP,KAAKjH,KAAL,GAAaoH,YAAY,CAAZ,CAAxB,CADO;AAEVhE,mBAAGmE,KAAKC,KAAL,CAAWP,KAAK1C,MAAL,GAAc6C,YAAY,CAAZ,CAAzB,CAFO;AAGVpH,uBAAOuH,KAAKC,KAAL,CAAWP,KAAKjH,KAAL,GAAaoH,YAAY,CAAZ,CAAxB,CAHG;AAIV7C,wBAAQgD,KAAKC,KAAL,CAAWP,KAAK1C,MAAL,GAAc6C,YAAY,CAAZ,CAAzB;AAJE,aAAd;;AAOA,gBAAIX,YAAJ,EAAkB;;AAEdlD,yBAASkE,eAAT,CAAyBhB,YAAzB;AACAA,6BAAaiB,WAAb,GAA2B,IAA3B;AAEH,aALD,MAKO;;AAEHnE,yBAASkE,eAAT,CAAyB,IAAzB;AACAlE,yBAASoE,cAAT,CAAwB,IAAxB;AAEH;;AAED,gBAAIpE,SAASqE,SAAT,IAAsBlB,UAA1B,EAAsCnD,SAASsE,KAAT;;AAEtC,gBAAIrB,OAAOsB,MAAP,KAAkB,IAAtB,EAA4BtB,OAAOI,iBAAP;;AAE5BJ,mBAAOuB,WAAP,CAAmBC,SAAnB,CAA6B/B,QAAQxH,QAArC,EAA+CwH,QAAQrD,UAAvD,EAAmEqD,QAAQrE,KAA3E;;AAEAyE,oBAAQ5H,QAAR,CAAiBwJ,IAAjB,CAAsBhC,QAAQxH,QAA9B;AACA4H,oBAAQzD,UAAR,CAAmBqF,IAAnB,CAAwBhC,QAAQrD,UAAhC;AACAyD,oBAAQzE,KAAR,CAAcqG,IAAd,CAAmBhC,QAAQrE,KAA3B;;AAEAqE,oBAAQiC,eAAR,CAAwBzE,eAAxB,EAAyCwC,QAAQrE,KAAR,CAAc0F,CAAvD;AACAjB,oBAAQ6B,eAAR,CAAwBvE,eAAxB,EAAyC0C,QAAQzE,KAAR,CAAc0F,CAAvD;;AAEA,gBAAI3H,UAAU8C,YAAd,EAA4B;;AAExB9C,0BAAUwI,SAAV,GAAsB3B,OAAO4B,IAA7B;AACAzI,0BAAU0I,QAAV,GAAqB7B,OAAO8B,GAA5B;;AAEA3I,0BAAU8C,YAAV,CAAuBV,SAAvB;;AAEAkE,wBAAQsC,gBAAR,CAAyBC,QAAzB,GAAoCzG,UAAU0G,oBAA9C;AACApC,wBAAQkC,gBAAR,CAAyBC,QAAzB,GAAoCzG,UAAU2G,qBAA9C;AAEH,aAVD,MAUO;;AAEHzC,wBAAQsC,gBAAR,GAA2BI,gBAAgBlE,WAAWmE,WAA3B,EAAwC,IAAxC,EAA8CpC,OAAO4B,IAArD,EAA2D5B,OAAO8B,GAAlE,CAA3B;AACAjC,wBAAQkC,gBAAR,GAA2BI,gBAAgB9B,WAAW+B,WAA3B,EAAwC,IAAxC,EAA8CpC,OAAO4B,IAArD,EAA2D5B,OAAO8B,GAAlE,CAA3B;AAEH;;AAED;AACA,gBAAI7B,YAAJ,EAAkB;;AAEdA,6BAAaoC,QAAb,CAAsB/F,GAAtB,CAA0Bc,YAAY0D,CAAtC,EAAyC1D,YAAYR,CAArD,EAAwDQ,YAAY5D,KAApE,EAA2E4D,YAAYW,MAAvF;AACAkC,6BAAaqC,OAAb,CAAqBhG,GAArB,CAAyBc,YAAY0D,CAArC,EAAwC1D,YAAYR,CAApD,EAAuDQ,YAAY5D,KAAnE,EAA0E4D,YAAYW,MAAtF;AAEH,aALD,MAKO;;AAEHhB,yBAASwF,WAAT,CAAqBnF,YAAY0D,CAAjC,EAAoC1D,YAAYR,CAAhD,EAAmDQ,YAAY5D,KAA/D,EAAsE4D,YAAYW,MAAlF;AACAhB,yBAASyF,UAAT,CAAoBpF,YAAY0D,CAAhC,EAAmC1D,YAAYR,CAA/C,EAAkDQ,YAAY5D,KAA9D,EAAqE4D,YAAYW,MAAjF;AAEH;AACDhB,qBAAS+C,MAAT,CAAgBC,KAAhB,EAAuBN,OAAvB,EAAgCQ,YAAhC,EAA8CC,UAA9C;;AAEA;AACA,gBAAID,YAAJ,EAAkB;;AAEdA,6BAAaoC,QAAb,CAAsB/F,GAAtB,CAA0Be,YAAYyD,CAAtC,EAAyCzD,YAAYT,CAArD,EAAwDS,YAAY7D,KAApE,EAA2E6D,YAAYU,MAAvF;AACAkC,6BAAaqC,OAAb,CAAqBhG,GAArB,CAAyBe,YAAYyD,CAArC,EAAwCzD,YAAYT,CAApD,EAAuDS,YAAY7D,KAAnE,EAA0E6D,YAAYU,MAAtF;AAEH,aALD,MAKO;;AAEHhB,yBAASwF,WAAT,CAAqBlF,YAAYyD,CAAjC,EAAoCzD,YAAYT,CAAhD,EAAmDS,YAAY7D,KAA/D,EAAsE6D,YAAYU,MAAlF;AACAhB,yBAASyF,UAAT,CAAoBnF,YAAYyD,CAAhC,EAAmCzD,YAAYT,CAA/C,EAAkDS,YAAY7D,KAA9D,EAAqE6D,YAAYU,MAAjF;AAEH;AACDhB,qBAAS+C,MAAT,CAAgBC,KAAhB,EAAuBF,OAAvB,EAAgCI,YAAhC,EAA8CC,UAA9C;;AAEA,gBAAID,YAAJ,EAAkB;;AAEdA,6BAAaoC,QAAb,CAAsB/F,GAAtB,CAA0B,CAA1B,EAA6B,CAA7B,EAAgCmE,KAAKjH,KAArC,EAA4CiH,KAAK1C,MAAjD;AACAkC,6BAAaqC,OAAb,CAAqBhG,GAArB,CAAyB,CAAzB,EAA4B,CAA5B,EAA+BmE,KAAKjH,KAApC,EAA2CiH,KAAK1C,MAAhD;AACAkC,6BAAaiB,WAAb,GAA2B,KAA3B;AACAnE,yBAASkE,eAAT,CAAyB,IAAzB;AAEH,aAPD,MAOO;;AAEHlE,yBAASwF,WAAT,CAAqB,CAArB,EAAwB,CAAxB,EAA2B9B,KAAKjH,KAAhC,EAAuCiH,KAAK1C,MAA5C;AACAhB,yBAASoE,cAAT,CAAwB,KAAxB;AAEH;;AAED,gBAAIhB,UAAJ,EAAgB;;AAEZJ,sBAAMI,UAAN,GAAmB,IAAnB;AAEH;;AAED,gBAAI3C,MAAMgC,eAAV,EAA2B;;AAEvBhC,sBAAM+B,WAAN;AAEH;;AAED;AAEH;;AAED;;AAEAxC,iBAAS+C,MAAT,CAAgBC,KAAhB,EAAuBC,MAAvB,EAA+BC,YAA/B,EAA6CC,UAA7C;AAEH,KApKD;;AAsKA,SAAKrD,OAAL,GAAe,YAAY;;AAEvB1C,eAAOsI,mBAAP,CAA2B,wBAA3B,EAAqDhE,wBAArD,EAA+E,KAA/E;AAEH,KAJD;;AAMA;;AAEA,aAASiE,mBAAT,CAA6BC,GAA7B,EAAkC;;AAE9B,YAAIC,UAAU,OAAQD,IAAIE,OAAJ,GAAcF,IAAIG,QAA1B,CAAd;AACA,YAAIC,WAAW,CAAEJ,IAAIE,OAAJ,GAAcF,IAAIG,QAApB,IAAiCF,OAAjC,GAA2C,GAA1D;AACA,YAAII,UAAU,OAAQL,IAAIM,KAAJ,GAAYN,IAAIO,OAAxB,CAAd;AACA,YAAIC,WAAW,CAAER,IAAIM,KAAJ,GAAYN,IAAIO,OAAlB,IAA8BF,OAA9B,GAAwC,GAAvD;AACA,eAAO,EAAC5H,OAAO,CAACwH,OAAD,EAAUI,OAAV,CAAR,EAA4B1C,QAAQ,CAACyC,QAAD,EAAWI,QAAX,CAApC,EAAP;AAEH;;AAED,aAASC,mBAAT,CAA6BT,GAA7B,EAAkCU,WAAlC,EAA+CC,KAA/C,EAAsDC,IAAtD,EAA4D;;AAExDF,sBAAcA,gBAAgBlM,SAAhB,GAA4B,IAA5B,GAAmCkM,WAAjD;AACAC,gBAAQA,UAAUnM,SAAV,GAAsB,IAAtB,GAA6BmM,KAArC;AACAC,eAAOA,SAASpM,SAAT,GAAqB,OAArB,GAA+BoM,IAAtC;;AAEA,YAAIC,kBAAkBH,cAAc,CAAC,GAAf,GAAqB,GAA3C;;AAEA;AACA,YAAII,OAAO,IAAI/I,MAAMS,OAAV,EAAX;AACA,YAAIuI,IAAID,KAAKzB,QAAb;;AAEA;AACA,YAAI2B,iBAAiBjB,oBAAoBC,GAApB,CAArB;;AAEA;AACAe,UAAE,IAAI,CAAJ,GAAQ,CAAV,IAAeC,eAAevI,KAAf,CAAqB,CAArB,CAAf;AACAsI,UAAE,IAAI,CAAJ,GAAQ,CAAV,IAAe,GAAf;AACAA,UAAE,IAAI,CAAJ,GAAQ,CAAV,IAAeC,eAAerD,MAAf,CAAsB,CAAtB,IAA2BkD,eAA1C;AACAE,UAAE,IAAI,CAAJ,GAAQ,CAAV,IAAe,GAAf;;AAEA;AACA;AACA;AACAA,UAAE,IAAI,CAAJ,GAAQ,CAAV,IAAe,GAAf;AACAA,UAAE,IAAI,CAAJ,GAAQ,CAAV,IAAeC,eAAevI,KAAf,CAAqB,CAArB,CAAf;AACAsI,UAAE,IAAI,CAAJ,GAAQ,CAAV,IAAe,CAACC,eAAerD,MAAf,CAAsB,CAAtB,CAAD,GAA4BkD,eAA3C;AACAE,UAAE,IAAI,CAAJ,GAAQ,CAAV,IAAe,GAAf;;AAEA;AACAA,UAAE,IAAI,CAAJ,GAAQ,CAAV,IAAe,GAAf;AACAA,UAAE,IAAI,CAAJ,GAAQ,CAAV,IAAe,GAAf;AACAA,UAAE,IAAI,CAAJ,GAAQ,CAAV,IAAeH,QAASD,QAAQC,IAAjB,IAA0B,CAACC,eAA1C;AACAE,UAAE,IAAI,CAAJ,GAAQ,CAAV,IAAiBH,OAAOD,KAAT,IAAqBA,QAAQC,IAA7B,CAAf;;AAEA;AACAG,UAAE,IAAI,CAAJ,GAAQ,CAAV,IAAe,GAAf;AACAA,UAAE,IAAI,CAAJ,GAAQ,CAAV,IAAe,GAAf;AACAA,UAAE,IAAI,CAAJ,GAAQ,CAAV,IAAeF,eAAf;AACAE,UAAE,IAAI,CAAJ,GAAQ,CAAV,IAAe,GAAf;;AAEAD,aAAKG,SAAL;AACA,eAAOH,IAAP;AAEH;;AAED,aAAStB,eAAT,CAAyBQ,GAAzB,EAA8BU,WAA9B,EAA2CC,KAA3C,EAAkDC,IAAlD,EAAwD;;AAEpD,YAAIM,UAAU9C,KAAK+C,EAAL,GAAU,KAAxB;;AAEA,YAAIC,UAAU;AACVd,mBAAOlC,KAAKiD,GAAL,CAASrB,IAAIsB,SAAJ,GAAgBJ,OAAzB,CADG;AAEVX,qBAASnC,KAAKiD,GAAL,CAASrB,IAAIuB,WAAJ,GAAkBL,OAA3B,CAFC;AAGVhB,qBAAS9B,KAAKiD,GAAL,CAASrB,IAAIwB,WAAJ,GAAkBN,OAA3B,CAHC;AAIVf,sBAAU/B,KAAKiD,GAAL,CAASrB,IAAIyB,YAAJ,GAAmBP,OAA5B;AAJA,SAAd;;AAOA,eAAOT,oBAAoBW,OAApB,EAA6BV,WAA7B,EAA0CC,KAA1C,EAAiDC,IAAjD,CAAP;AAEH;AAEJ;;AAED,yDAAezG,QAAf,E;;;;;;;;;;;;;;;;;;AC/qBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI,CAAC,qEAAL,EAAiC;AAC7BuH,IAAA,yEAA+BC,OAAD,IAAa;AACvCxM,iBAASyM,IAAT,CAActL,WAAd,CAA0BqL,OAA1B;AACH,KAFD;AAGH;;AAED,MAAMvH,WAAW,IAAIrC,MAAM8J,aAAV,CAAwB,EAAEC,WAAW,IAAb,EAAxB,CAAjB;AACA1H,SAAS2H,aAAT,CAAuB,QAAvB;AACA3H,SAASoB,aAAT,CAAuBhE,OAAOwK,gBAA9B;AACA5H,SAASe,OAAT,CAAiB3D,OAAOyK,UAAxB,EAAoCzK,OAAO0K,WAA3C;;AAEA/M,SAASyM,IAAT,CAActL,WAAd,CAA0B8D,SAASuB,UAAnC;;AAEA,MAAMyB,QAAQ,IAAIrF,MAAMoK,KAAV,EAAd;;AAEA;AACA,MAAMC,QAAQ,IAAIrK,MAAMsK,eAAV,CAA0B,QAA1B,EAAoC,QAApC,CAAd;AACAD,MAAM9M,QAAN,CAAeqE,GAAf,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB;AACAyD,MAAMkF,GAAN,CAAUF,KAAV;;AAEA;AACA,MAAMG,QAAQ,IAAIxK,MAAMyK,QAAV,EAAd;AACApF,MAAMkF,GAAN,CAAUC,KAAV;AACA,MAAMlF,SAAS,IAAItF,MAAMgF,iBAAV,CAA4B,EAA5B,EAAgCvF,OAAOyK,UAAP,GAAoBzK,OAAO0K,WAA3D,EAAwE,GAAxE,EAA6E,GAA7E,CAAf;AACAK,MAAMD,GAAN,CAAUjF,MAAV;;AAEA;AACA,MAAMoF,MAAMrE,KAAK+C,EAAL,GAAU,CAAtB;AACA,MAAMxJ,QAAQ,CAAC,MAAM;AACjB,UAAM+K,KAAK,IAAI3K,MAAMwC,OAAV,EAAX;AACA,UAAMoI,KAAK,IAAI5K,MAAMwC,OAAV,EAAX;;AAEA,WAAO;AACHqI,mBAAWC,CAAX,EAAc;AACV,kBAAMC,IAAID,IAAIJ,GAAd;;AAEA,kBAAMtE,IAAIC,KAAK2E,GAAL,CAASD,IAAI,CAAb,IAAkB1E,KAAK4E,GAAL,CAASF,IAAI,CAAb,CAAlB,GAAoC,EAA9C;AACA,kBAAM7I,IAAImE,KAAK2E,GAAL,CAASD,IAAI,EAAb,IAAmB,CAAnB,GAAuB1E,KAAK4E,GAAL,CAASF,IAAI,EAAb,IAAmB,CAA1C,GAA8C,CAAxD;AACA,kBAAMG,IAAI7E,KAAK2E,GAAL,CAASD,CAAT,IAAc1E,KAAK2E,GAAL,CAASD,IAAI,CAAb,CAAd,GAAgC,EAA1C;;AAEA,mBAAOJ,GAAG/I,GAAH,CAAOwE,CAAP,EAAUlE,CAAV,EAAagJ,CAAb,EAAgBC,cAAhB,CAA+B,CAA/B,CAAP;AACH,SATE;;AAWHC,qBAAaN,CAAb,EAAgB;AACZ,kBAAMO,QAAQ,OAAd;;AAEA,kBAAMC,KAAKjF,KAAKkF,GAAL,CAAS,CAAT,EAAYT,IAAIO,KAAhB,CAAX;AACA,kBAAMG,KAAKnF,KAAKoF,GAAL,CAAS,CAAT,EAAYX,IAAIO,KAAhB,CAAX;;AAEA,mBAAOT,GACF7D,IADE,CACG,KAAK8D,UAAL,CAAgBW,EAAhB,CADH,EAEFE,GAFE,CAEE,KAAKb,UAAL,CAAgBS,EAAhB,CAFF,EAGFK,SAHE,EAAP;AAIH;AArBE,KAAP;AAuBH,CA3Ba,GAAd;;AA6BA,MAAMC,oBAAoB,wGAAAjM,CAAyBC,KAAzB,EAAgC,IAAhC,CAA1B;AACAyF,MAAMkF,GAAN,CAAUqB,iBAAV;;AAEA;AACA,MAAMC,0BAA0B,qHAAAC,CAA+BlM,KAA/B,EAAsC,GAAtC,CAAhC;AACAyF,MAAMkF,GAAN,CAAUsB,uBAAV;;AAEA;AACA,MAAME,0BAA0B,qHAAAC,CAA+BpM,KAA/B,EAAsC,GAAtC,CAAhC;AACAyF,MAAMkF,GAAN,CAAUwB,uBAAV;;AAEA;AACA,yFAAAE,CAAkB5G,KAAlB,EAAyB,GAAzB,EAA8B,GAA9B;AACAA,MAAM6G,UAAN,GAAmB,IAAIlM,MAAMmM,iBAAV,GACdC,OADc,CACN,YADM,EAEdC,IAFc,CAET,CAAC,UAAD,EAAa,WAAb,EAA0B,SAA1B,EAAqC,YAArC,EAAmD,WAAnD,EAAgE,UAAhE,CAFS,CAAnB;;AAIA;AACA,MAAMC,UAAU,IAAI,4DAAJ,CAAchH,MAAd,CAAhB;AACA,MAAMiH,SAAS,IAAI,2DAAJ,CAAalK,QAAb,CAAf;;AAEAiK,QAAQxL,IAAR;;AAEA,gEAAqB,CAACtC,GAAD,EAAMH,OAAN,KAAkB;AACnC,QAAIG,GAAJ,EAAS;AACL;AACH;;AAED,UAAMgO,aAAa,6DAAkBnO,OAAlB,EAA2BgE,SAASuB,UAApC,CAAnB;AACAxG,aAASyM,IAAT,CAActL,WAAd,CAA0BiO,UAA1B;AACH,CAPD;;AASA/M,OAAOC,gBAAP,CAAwB,QAAxB,EAAkC,MAAM;AACpC4F,WAAOmH,MAAP,GAAgBhN,OAAOyK,UAAP,GAAoBzK,OAAO0K,WAA3C;AACA7E,WAAOoH,sBAAP;AACAH,WAAOnJ,OAAP,CAAe3D,OAAOyK,UAAtB,EAAkCzK,OAAO0K,WAAzC;AACH,CAJD;;AAOA;AACA,MAAM5M,WAAW,IAAIyC,MAAMwC,OAAV,EAAjB;AACA,MAAMmK,UAAU,IAAI3M,MAAMwC,OAAV,EAAhB;AACA,MAAMoK,SAAS,IAAI5M,MAAMwC,OAAV,EAAf;;AAEA,IAAIqK,WAAW,CAAf;AACA,IAAIC,WAAW,CAAf;AACA,IAAIC,WAAWtN,OAAOuN,WAAP,CAAmBC,GAAnB,EAAf;;AAEA,SAASC,OAAT,CAAiBC,IAAjB,EAAuB;AACnBZ,WAAO9H,qBAAP,CAA6ByI,OAA7B;;AAEA,UAAM7B,QAAQ8B,OAAOJ,QAArB;;AAEAD,gBAAYD,QAAZ;AACAC,eAAWA,WAAW,CAAtB;AACAvP,aAASwJ,IAAT,CAAcnH,MAAMiL,UAAN,CAAiBiC,QAAjB,CAAd;AACAvP,aAAS2E,CAAT,IAAc,GAAd;AACAsI,UAAMjN,QAAN,CAAewJ,IAAf,CAAoBxJ,QAApB;AACAoP,YAAQ5F,IAAR,CAAanH,MAAMwL,YAAN,CAAmB0B,QAAnB,CAAb;AACAD,gBAAYF,QAAQzK,CAAR,GAAY,SAAZ,GAAwBmJ,KAApC;AACAwB,eAAWxG,KAAKkF,GAAL,CAAS,OAAT,EAAkBlF,KAAKoF,GAAL,CAAS,MAAT,EAAiBoB,QAAjB,CAAlB,CAAX;AACArC,UAAMoC,MAAN,CAAaA,OAAO7F,IAAP,CAAYxJ,QAAZ,EAAsBmO,GAAtB,CAA0BiB,OAA1B,CAAb;;AAEAL,YAAQhL,MAAR;AACAiL,WAAOnH,MAAP,CAAcC,KAAd,EAAqBC,MAArB;;AAEAyH,eAAWI,IAAX;AACH;;AAEDZ,OAAO9H,qBAAP,CAA6ByI,OAA7B,E;;;;;;;;;;;;ACtIA,SAASE,qBAAT,CAA+BxN,KAA/B,EAAsCC,SAAtC,EAAiD;;AAE7CG,UAAMqN,cAAN,CAAqBC,IAArB,CAA0B,IAA1B;;AAEA,QAAIC,WAAW,EAAf;AACA,QAAIC,UAAU,EAAd;AACA,QAAIC,SAAS,EAAb;;AAEA;AACA,QAAIC,SAAS,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAb,CAT6C,CASrB;AACxB,QAAIC,SAAS,CAAC,CAAD,EAAI,GAAJ,EAAS,GAAT,CAAb,CAV6C,CAUjB;;AAE5B,QAAIC,KAAK,IAAI5N,MAAMwC,OAAV,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,CAAT;AACA,QAAIqL,UAAU,IAAI7N,MAAMwC,OAAV,EAAd;AACA,QAAI9E,QAAQ,IAAIsC,MAAMwC,OAAV,EAAZ;;AAEA;AACA,QAAId,aAAa,IAAI1B,MAAM8N,UAAV,EAAjB;AACA,QAAIC,iBAAiB,IAAI/N,MAAM8N,UAAV,EAArB;AACAC,mBAAeC,gBAAf,CAAgCJ,EAAhC,EAAoCvH,KAAK+C,EAAL,GAAU,CAA9C;;AAEA,QAAI6E,QAAQ,IAAIjO,MAAMwC,OAAV,EAAZ;AACA,QAAI0L,YAAY,IAAIlO,MAAMwC,OAAV,EAAhB;AACA0L,cAAUnH,IAAV,CAAenH,MAAMiL,UAAN,CAAiB,CAAjB,CAAf;;AAEA;AACA;AACA,QAAIsD,OAAO;AACP;AACA,QAAInO,MAAMwC,OAAV,CAAkB,CAAC,KAAnB,EAA0B,CAA1B,EAA6B,CAA7B,CAFO,EAGP,IAAIxC,MAAMwC,OAAV,CAAkB,CAAlB,EAAqB,CAAC,KAAtB,EAA6B,CAA7B,CAHO,EAIP,IAAIxC,MAAMwC,OAAV,CAAkB,CAAlB,EAAqB,CAAC,KAAtB,EAA6B,CAA7B,CAJO;AAKP;AACA,QAAIxC,MAAMwC,OAAV,CAAkB,CAAlB,EAAqB,CAAC,KAAtB,EAA6B,CAA7B,CANO,EAOP,IAAIxC,MAAMwC,OAAV,CAAkB,KAAlB,EAAyB,CAAzB,EAA4B,CAA5B,CAPO,EAQP,IAAIxC,MAAMwC,OAAV,CAAkB,CAAlB,EAAqB,CAAC,KAAtB,EAA6B,CAA7B,CARO,CAAX;;AAWA,QAAIkI,MAAMrE,KAAK+C,EAAL,GAAU,CAApB,CAtC6C,CAsCtB;AACvB,QAAIgF,QAAQ,EAAZ;AACA,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;;AAExB,YAAIC,QAAUD,IAAI,CAAN,GAAY3D,GAAxB,CAFwB,CAEK;AAC7B0D,cAAMG,IAAN,CAAW,IAAIvO,MAAMwC,OAAV,CAAkB,CAAlB,EAAqB6D,KAAK2E,GAAL,CAASsD,KAAT,IAAkB,IAAvC,EAA6CjI,KAAK4E,GAAL,CAASqD,KAAT,IAAkB,IAA/D,CAAX;AAEH;;AAED;AACA,QAAIE,QAAQ,CAAZ,CAhD6C,CAgD9B;AACf,QAAIC,QAAQ,EAAZ;;AAEA,SAAK,IAAIJ,IAAI,CAAb,EAAgBA,IAAIG,KAApB,EAA2BH,GAA3B,EAAgC;;AAE5B,YAAIC,QAAUD,IAAIG,KAAN,GAAgB9D,GAA5B,CAF4B,CAEK;AACjC+D,cAAMF,IAAN,CAAW,IAAIvO,MAAMwC,OAAV,CAAkB6D,KAAK2E,GAAL,CAASsD,KAAT,IAAkB,IAApC,EAA0CjI,KAAK4E,GAAL,CAASqD,KAAT,IAAkB,IAA5D,EAAkE,CAAlE,CAAX,EAH4B,CAGsD;AAErF;AACD;AACA,QAAIE,QAAQ,CAAZ,CA1D6C,CA0D9B;AACf,QAAIE,QAAQ,EAAZ;;AAEA,SAAK,IAAIL,IAAI,CAAb,EAAgBA,IAAIG,KAApB,EAA2BH,GAA3B,EAAgC;;AAE5B,YAAIC,QAAUD,IAAIG,KAAN,GAAgB9D,GAA5B,CAF4B,CAEK;AACjCgE,cAAMH,IAAN,CAAW,IAAIvO,MAAMwC,OAAV,CAAkB6D,KAAK2E,GAAL,CAASsD,KAAT,IAAkB,KAApC,EAA2CjI,KAAK4E,GAAL,CAASqD,KAAT,IAAkB,KAA7D,EAAoE,CAApE,CAAX,EAH4B,CAGwD;AAEvF;;AAED,QAAIK,SAAS,IAAI3O,MAAMwC,OAAV,EAAb;AACA,QAAIoM,SAAS,IAAI5O,MAAMwC,OAAV,EAAb;;AAEA,aAASqM,SAAT,CAAmBC,KAAnB,EAA0B5Q,KAA1B,EAAiC;AAAE;;AAE/B0Q,eAAOhN,GAAP,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAC,CAAlB,EAAqBmN,eAArB,CAAqCrN,UAArC,EAF6B,CAEqB;;AAElD,aAAK,IAAIsN,IAAI,CAAb,EAAgBA,IAAIF,MAAMjM,MAA1B,EAAkCmM,GAAlC,EAAuC;;AAEnCL,mBAAO5H,IAAP,CAAY+H,MAAME,CAAN,CAAZ;AACAL,mBAAOI,eAAP,CAAuBrN,UAAvB;AACAiN,mBAAOpE,GAAP,CAAW0D,KAAX;;AAEAV,qBAASgB,IAAT,CAAcI,OAAOvI,CAArB,EAAwBuI,OAAOzM,CAA/B,EAAkCyM,OAAOzD,CAAzC;AACAsC,oBAAQe,IAAR,CAAaK,OAAOxI,CAApB,EAAuBwI,OAAO1M,CAA9B,EAAiC0M,OAAO1D,CAAxC;AACAuC,mBAAOc,IAAP,CAAYrQ,MAAM,CAAN,CAAZ,EAAsBA,MAAM,CAAN,CAAtB,EAAgCA,MAAM,CAAN,CAAhC;AAEH;;AAED0Q,eAAOhN,GAAP,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,EAAoBmN,eAApB,CAAoCrN,UAApC,EAhB6B,CAgBoB;;AAEjD,aAAK,IAAIsN,IAAIF,MAAMjM,MAAN,GAAe,CAA5B,EAA+BmM,KAAK,CAApC,EAAuCA,GAAvC,EAA4C;;AAExCL,mBAAO5H,IAAP,CAAY+H,MAAME,CAAN,CAAZ;AACAL,mBAAOI,eAAP,CAAuBrN,UAAvB;AACAiN,mBAAOpE,GAAP,CAAW0D,KAAX;;AAEAV,qBAASgB,IAAT,CAAcI,OAAOvI,CAArB,EAAwBuI,OAAOzM,CAA/B,EAAkCyM,OAAOzD,CAAzC;AACAsC,oBAAQe,IAAR,CAAaK,OAAOxI,CAApB,EAAuBwI,OAAO1M,CAA9B,EAAiC0M,OAAO1D,CAAxC;AACAuC,mBAAOc,IAAP,CAAYrQ,MAAM,CAAN,CAAZ,EAAsBA,MAAM,CAAN,CAAtB,EAAgCA,MAAM,CAAN,CAAhC;AAEH;AAEJ;;AAED,QAAI+Q,UAAU,IAAIjP,MAAMwC,OAAV,EAAd;AACA,QAAI0M,UAAU,IAAIlP,MAAMwC,OAAV,EAAd;AACA,QAAI2M,UAAU,IAAInP,MAAMwC,OAAV,EAAd;AACA,QAAI4M,UAAU,IAAIpP,MAAMwC,OAAV,EAAd;;AAEA,QAAI6M,UAAU,IAAIrP,MAAMwC,OAAV,EAAd;AACA,QAAI8M,UAAU,IAAItP,MAAMwC,OAAV,EAAd;AACA,QAAI+M,UAAU,IAAIvP,MAAMwC,OAAV,EAAd;AACA,QAAIgN,UAAU,IAAIxP,MAAMwC,OAAV,EAAd;;AAEA,aAASiN,YAAT,CAAsBX,KAAtB,EAA6BlJ,MAA7B,EAAqC1H,KAArC,EAA4C;AAAE;;AAE1C,aAAK,IAAI8Q,IAAI,CAAR,EAAWU,KAAKZ,MAAMjM,MAA3B,EAAmCmM,IAAIU,EAAvC,EAA2CV,GAA3C,EAAgD;;AAE5C,gBAAIW,SAASb,MAAME,CAAN,CAAb;AACA,gBAAIY,SAASd,MAAM,CAAEE,IAAI,CAAN,IAAYU,EAAlB,CAAb;;AAEAT,oBAAQlI,IAAR,CAAa4I,MAAb,EAAqBpF,GAArB,CAAyB3E,MAAzB;AACAqJ,oBAAQF,eAAR,CAAwBrN,UAAxB;AACAuN,oBAAQ1E,GAAR,CAAY0D,KAAZ;;AAEAiB,oBAAQnI,IAAR,CAAa6I,MAAb,EAAqBrF,GAArB,CAAyB3E,MAAzB;AACAsJ,oBAAQH,eAAR,CAAwBrN,UAAxB;AACAwN,oBAAQ3E,GAAR,CAAY0D,KAAZ;;AAEAkB,oBAAQpI,IAAR,CAAa6I,MAAb,EAAqBrF,GAArB,CAAyB3E,MAAzB;AACAuJ,oBAAQJ,eAAR,CAAwBhB,cAAxB;AACAoB,oBAAQ5E,GAAR,CAAY2D,SAAZ;;AAEAkB,oBAAQrI,IAAR,CAAa4I,MAAb,EAAqBpF,GAArB,CAAyB3E,MAAzB;AACAwJ,oBAAQL,eAAR,CAAwBhB,cAAxB;AACAqB,oBAAQ7E,GAAR,CAAY2D,SAAZ;;AAEAX,qBAASgB,IAAT,CAAcU,QAAQ7I,CAAtB,EAAyB6I,QAAQ/M,CAAjC,EAAoC+M,QAAQ/D,CAA5C;AACAqC,qBAASgB,IAAT,CAAcW,QAAQ9I,CAAtB,EAAyB8I,QAAQhN,CAAjC,EAAoCgN,QAAQhE,CAA5C;AACAqC,qBAASgB,IAAT,CAAca,QAAQhJ,CAAtB,EAAyBgJ,QAAQlN,CAAjC,EAAoCkN,QAAQlE,CAA5C;;AAEAqC,qBAASgB,IAAT,CAAcW,QAAQ9I,CAAtB,EAAyB8I,QAAQhN,CAAjC,EAAoCgN,QAAQhE,CAA5C;AACAqC,qBAASgB,IAAT,CAAcY,QAAQ/I,CAAtB,EAAyB+I,QAAQjN,CAAjC,EAAoCiN,QAAQjE,CAA5C;AACAqC,qBAASgB,IAAT,CAAca,QAAQhJ,CAAtB,EAAyBgJ,QAAQlN,CAAjC,EAAoCkN,QAAQlE,CAA5C;;AAEA;;AAEAmE,oBAAQtI,IAAR,CAAa4I,MAAb;AACAN,oBAAQN,eAAR,CAAwBrN,UAAxB;AACA2N,oBAAQ1D,SAAR;;AAEA2D,oBAAQvI,IAAR,CAAa6I,MAAb;AACAN,oBAAQP,eAAR,CAAwBrN,UAAxB;AACA4N,oBAAQ3D,SAAR;;AAEA4D,oBAAQxI,IAAR,CAAa6I,MAAb;AACAL,oBAAQR,eAAR,CAAwBhB,cAAxB;AACAwB,oBAAQ5D,SAAR;;AAEA6D,oBAAQzI,IAAR,CAAa4I,MAAb;AACAH,oBAAQT,eAAR,CAAwBhB,cAAxB;AACAyB,oBAAQ7D,SAAR;;AAEA6B,oBAAQe,IAAR,CAAac,QAAQjJ,CAArB,EAAwBiJ,QAAQnN,CAAhC,EAAmCmN,QAAQnE,CAA3C;AACAsC,oBAAQe,IAAR,CAAae,QAAQlJ,CAArB,EAAwBkJ,QAAQpN,CAAhC,EAAmCoN,QAAQpE,CAA3C;AACAsC,oBAAQe,IAAR,CAAaiB,QAAQpJ,CAArB,EAAwBoJ,QAAQtN,CAAhC,EAAmCsN,QAAQtE,CAA3C;;AAEAsC,oBAAQe,IAAR,CAAae,QAAQlJ,CAArB,EAAwBkJ,QAAQpN,CAAhC,EAAmCoN,QAAQpE,CAA3C;AACAsC,oBAAQe,IAAR,CAAagB,QAAQnJ,CAArB,EAAwBmJ,QAAQrN,CAAhC,EAAmCqN,QAAQrE,CAA3C;AACAsC,oBAAQe,IAAR,CAAaiB,QAAQpJ,CAArB,EAAwBoJ,QAAQtN,CAAhC,EAAmCsN,QAAQtE,CAA3C;;AAEAuC,mBAAOc,IAAP,CAAYrQ,MAAM,CAAN,CAAZ,EAAsBA,MAAM,CAAN,CAAtB,EAAgCA,MAAM,CAAN,CAAhC;AACAuP,mBAAOc,IAAP,CAAYrQ,MAAM,CAAN,CAAZ,EAAsBA,MAAM,CAAN,CAAtB,EAAgCA,MAAM,CAAN,CAAhC;AACAuP,mBAAOc,IAAP,CAAYrQ,MAAM,CAAN,CAAZ,EAAsBA,MAAM,CAAN,CAAtB,EAAgCA,MAAM,CAAN,CAAhC;;AAEAuP,mBAAOc,IAAP,CAAYrQ,MAAM,CAAN,CAAZ,EAAsBA,MAAM,CAAN,CAAtB,EAAgCA,MAAM,CAAN,CAAhC;AACAuP,mBAAOc,IAAP,CAAYrQ,MAAM,CAAN,CAAZ,EAAsBA,MAAM,CAAN,CAAtB,EAAgCA,MAAM,CAAN,CAAhC;AACAuP,mBAAOc,IAAP,CAAYrQ,MAAM,CAAN,CAAZ,EAAsBA,MAAM,CAAN,CAAtB,EAAgCA,MAAM,CAAN,CAAhC;AAEH;AAEJ;;AAED,aAAS2R,gBAAT,CAA0Bf,KAA1B,EAAiCgB,SAAjC,EAA4CC,OAA5C,EAAqD7R,KAArD,EAA4D;;AAExD,aAAK,IAAI8Q,IAAI,CAAR,EAAWU,KAAKZ,MAAMjM,MAA3B,EAAmCmM,IAAIU,EAAvC,EAA2CV,GAA3C,EAAgD;;AAE5C,gBAAIW,SAASb,MAAME,CAAN,CAAb;AACA,gBAAIY,SAASd,MAAM,CAAEE,IAAI,CAAN,IAAYU,EAAlB,CAAb;;AAEAT,oBAAQlI,IAAR,CAAa4I,MAAb;AACAV,oBAAQF,eAAR,CAAwBrN,UAAxB;AACAuN,oBAAQ1E,GAAR,CAAYuF,SAAZ;;AAEAZ,oBAAQnI,IAAR,CAAa6I,MAAb;AACAV,oBAAQH,eAAR,CAAwBrN,UAAxB;AACAwN,oBAAQ3E,GAAR,CAAYuF,SAAZ;;AAEAX,oBAAQpI,IAAR,CAAa6I,MAAb;AACAT,oBAAQJ,eAAR,CAAwBrN,UAAxB;AACAyN,oBAAQ5E,GAAR,CAAYwF,OAAZ;;AAEAX,oBAAQrI,IAAR,CAAa4I,MAAb;AACAP,oBAAQL,eAAR,CAAwBrN,UAAxB;AACA0N,oBAAQ7E,GAAR,CAAYwF,OAAZ;;AAEAxC,qBAASgB,IAAT,CAAcU,QAAQ7I,CAAtB,EAAyB6I,QAAQ/M,CAAjC,EAAoC+M,QAAQ/D,CAA5C;AACAqC,qBAASgB,IAAT,CAAcW,QAAQ9I,CAAtB,EAAyB8I,QAAQhN,CAAjC,EAAoCgN,QAAQhE,CAA5C;AACAqC,qBAASgB,IAAT,CAAca,QAAQhJ,CAAtB,EAAyBgJ,QAAQlN,CAAjC,EAAoCkN,QAAQlE,CAA5C;;AAEAqC,qBAASgB,IAAT,CAAcW,QAAQ9I,CAAtB,EAAyB8I,QAAQhN,CAAjC,EAAoCgN,QAAQhE,CAA5C;AACAqC,qBAASgB,IAAT,CAAcY,QAAQ/I,CAAtB,EAAyB+I,QAAQjN,CAAjC,EAAoCiN,QAAQjE,CAA5C;AACAqC,qBAASgB,IAAT,CAAca,QAAQhJ,CAAtB,EAAyBgJ,QAAQlN,CAAjC,EAAoCkN,QAAQlE,CAA5C;;AAEA;;AAEAmE,oBAAQtI,IAAR,CAAa4I,MAAb;AACAN,oBAAQN,eAAR,CAAwBrN,UAAxB;AACA2N,oBAAQ1D,SAAR;;AAEA2D,oBAAQvI,IAAR,CAAa6I,MAAb;AACAN,oBAAQP,eAAR,CAAwBrN,UAAxB;AACA4N,oBAAQ3D,SAAR;;AAEA4D,oBAAQxI,IAAR,CAAa6I,MAAb;AACAL,oBAAQR,eAAR,CAAwBrN,UAAxB;AACA6N,oBAAQ5D,SAAR;;AAEA6D,oBAAQzI,IAAR,CAAa4I,MAAb;AACAH,oBAAQT,eAAR,CAAwBrN,UAAxB;AACA8N,oBAAQ7D,SAAR;;AAEA6B,oBAAQe,IAAR,CAAac,QAAQjJ,CAArB,EAAwBiJ,QAAQnN,CAAhC,EAAmCmN,QAAQnE,CAA3C;AACAsC,oBAAQe,IAAR,CAAae,QAAQlJ,CAArB,EAAwBkJ,QAAQpN,CAAhC,EAAmCoN,QAAQpE,CAA3C;AACAsC,oBAAQe,IAAR,CAAaiB,QAAQpJ,CAArB,EAAwBoJ,QAAQtN,CAAhC,EAAmCsN,QAAQtE,CAA3C;;AAEAsC,oBAAQe,IAAR,CAAae,QAAQlJ,CAArB,EAAwBkJ,QAAQpN,CAAhC,EAAmCoN,QAAQpE,CAA3C;AACAsC,oBAAQe,IAAR,CAAagB,QAAQnJ,CAArB,EAAwBmJ,QAAQrN,CAAhC,EAAmCqN,QAAQrE,CAA3C;AACAsC,oBAAQe,IAAR,CAAaiB,QAAQpJ,CAArB,EAAwBoJ,QAAQtN,CAAhC,EAAmCsN,QAAQtE,CAA3C;;AAEAuC,mBAAOc,IAAP,CAAYrQ,MAAM,CAAN,CAAZ,EAAsBA,MAAM,CAAN,CAAtB,EAAgCA,MAAM,CAAN,CAAhC;AACAuP,mBAAOc,IAAP,CAAYrQ,MAAM,CAAN,CAAZ,EAAsBA,MAAM,CAAN,CAAtB,EAAgCA,MAAM,CAAN,CAAhC;AACAuP,mBAAOc,IAAP,CAAYrQ,MAAM,CAAN,CAAZ,EAAsBA,MAAM,CAAN,CAAtB,EAAgCA,MAAM,CAAN,CAAhC;;AAEAuP,mBAAOc,IAAP,CAAYrQ,MAAM,CAAN,CAAZ,EAAsBA,MAAM,CAAN,CAAtB,EAAgCA,MAAM,CAAN,CAAhC;AACAuP,mBAAOc,IAAP,CAAYrQ,MAAM,CAAN,CAAZ,EAAsBA,MAAM,CAAN,CAAtB,EAAgCA,MAAM,CAAN,CAAhC;AACAuP,mBAAOc,IAAP,CAAYrQ,MAAM,CAAN,CAAZ,EAAsBA,MAAM,CAAN,CAAtB,EAAgCA,MAAM,CAAN,CAAhC;AAEH;AAEJ;;AAED,QAAI0H,SAAS,IAAI5F,MAAMwC,OAAV,EAAb;AACA,QAAIsN,YAAY,IAAI9P,MAAMwC,OAAV,EAAhB;AACA,QAAIuN,UAAU,IAAI/P,MAAMwC,OAAV,EAAd;;AAGA,SAAK,IAAI6L,IAAI,CAAb,EAAgBA,KAAKxO,SAArB,EAAgCwO,GAAhC,EAAqC;;AAEjCJ,cAAMlH,IAAN,CAAWnH,MAAMiL,UAAN,CAAiBwD,IAAIxO,SAArB,CAAX;;AAEA+N,WAAGhM,GAAH,CAAO,CAAP,EAAU,CAAV,EAAa,CAAb;;AAEAiM,gBAAQmC,UAAR,CAAmB/B,KAAnB,EAA0BC,SAA1B,EAAqCvC,SAArC;AACAjO,cAAMuS,YAAN,CAAmBrC,EAAnB,EAAuBC,OAAvB,EAAgClC,SAAhC;AACAiC,WAAGqC,YAAH,CAAgBpC,OAAhB,EAAyBnQ,KAAzB;;AAEA,YAAI4Q,QAAQjI,KAAK6J,KAAL,CAAWrC,QAAQzH,CAAnB,EAAsByH,QAAQ3C,CAA9B,CAAZ;;AAEAxJ,mBAAWsM,gBAAX,CAA4BJ,EAA5B,EAAgCU,KAAhC;;AAEA,YAAID,IAAI,CAAJ,KAAU,CAAd,EAAiB;AACb;AACA;AACAyB,sBAAUlO,GAAV,CAAc,CAAC,GAAf,EAAoB,CAAC,IAArB,EAA2B,CAA3B;AACAkO,sBAAUf,eAAV,CAA0BrN,UAA1B;AACAoO,sBAAUvF,GAAV,CAAc0D,KAAd;;AAEA8B,oBAAQnO,GAAR,CAAY,CAAZ,EAAe,CAAC,KAAhB,EAAuB,CAAvB;AACAmO,oBAAQhB,eAAR,CAAwBrN,UAAxB;AACAqO,oBAAQxF,GAAR,CAAY0D,KAAZ;AACA4B,6BAAiBzB,KAAjB,EAAwB0B,SAAxB,EAAmCC,OAAnC,EAA4CpC,MAA5C;;AAEAmC,sBAAUlO,GAAV,CAAc,GAAd,EAAmB,CAAC,IAApB,EAA0B,CAA1B;AACAkO,sBAAUf,eAAV,CAA0BrN,UAA1B;AACAoO,sBAAUvF,GAAV,CAAc0D,KAAd;;AAEA8B,oBAAQnO,GAAR,CAAY,CAAZ,EAAe,CAAC,KAAhB,EAAuB,CAAvB;AACAmO,oBAAQhB,eAAR,CAAwBrN,UAAxB;AACAqO,oBAAQxF,GAAR,CAAY0D,KAAZ;AACA4B,6BAAiBzB,KAAjB,EAAwB0B,SAAxB,EAAmCC,OAAnC,EAA4CpC,MAA5C;AACH;;AAED;AACA8B,qBAAahB,KAAb,EAAoB7I,OAAOhE,GAAP,CAAW,CAAX,EAAc,CAAC,KAAf,EAAsB,CAAtB,CAApB,EAA8C+L,MAA9C;AACA;AACA8B,qBAAaf,KAAb,EAAoB9I,OAAOhE,GAAP,CAAW,GAAX,EAAgB,CAAhB,EAAmB,CAAnB,CAApB,EAA2C8L,MAA3C;AACA+B,qBAAaf,KAAb,EAAoB9I,OAAOhE,GAAP,CAAW,CAAC,GAAZ,EAAiB,CAAjB,EAAoB,CAApB,CAApB,EAA4C8L,MAA5C;;AAEAQ,kBAAUnH,IAAV,CAAekH,KAAf;AACAF,uBAAehH,IAAf,CAAoBrF,UAApB;AAEH;;AAED;;AAEA,SAAKyO,YAAL,CAAkB,UAAlB,EAA8B,IAAInQ,MAAMoQ,eAAV,CAA0B,IAAIC,YAAJ,CAAiB9C,QAAjB,CAA1B,EAAsD,CAAtD,CAA9B;AACA,SAAK4C,YAAL,CAAkB,QAAlB,EAA4B,IAAInQ,MAAMoQ,eAAV,CAA0B,IAAIC,YAAJ,CAAiB7C,OAAjB,CAA1B,EAAqD,CAArD,CAA5B;AACA,SAAK2C,YAAL,CAAkB,OAAlB,EAA2B,IAAInQ,MAAMoQ,eAAV,CAA0B,IAAIC,YAAJ,CAAiB5C,MAAjB,CAA1B,EAAoD,CAApD,CAA3B;AAEH;;AAEDL,sBAAsBkD,SAAtB,GAAkCC,OAAOC,MAAP,CAAcxQ,MAAMqN,cAAN,CAAqBiD,SAAnC,CAAlC;;AAEA,yDAAelD,qBAAf,E;;;;;;;;;ACzTA;;AAEO,SAAStB,8BAAT,CAAwClM,KAAxC,EAA+CC,SAA/C,EAA0D;AAC7D,UAAMC,WAAW,IAAI,0DAAJ,CAAgCF,KAAhC,EAAuCC,SAAvC,CAAjB;AACA,UAAME,WAAW,IAAIC,MAAMC,iBAAV,EAAjB;AACA,UAAMwQ,OAAO,IAAIzQ,MAAMI,IAAV,CAAeN,QAAf,EAAyBC,QAAzB,CAAb;;AAEA0Q,SAAKlT,QAAL,CAAc2E,CAAd,GAAkB,GAAlB;;AAEA,WAAOuO,IAAP;AACH,C;;;;;;;ACVD,SAASC,4BAAT,CAAsC9Q,KAAtC,EAA6CC,SAA7C,EAAwD;;AAEpDG,UAAMqN,cAAN,CAAqBC,IAArB,CAA0B,IAA1B;;AAEA,QAAIC,WAAW,EAAf;AACA,QAAIC,UAAU,EAAd;;AAEA,QAAI9L,aAAa,IAAI1B,MAAM8N,UAAV,EAAjB;;AAEA,QAAIF,KAAK,IAAI5N,MAAMwC,OAAV,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,CAAT;;AAEA,QAAIyL,QAAQ,IAAIjO,MAAMwC,OAAV,EAAZ;AACA,QAAImK,UAAU,IAAI3M,MAAMwC,OAAV,EAAd;;AAEA;;AAEA,QAAIiM,QAAQ,CACR,IAAIzO,MAAMwC,OAAV,CAAkB,CAAlB,EAAqB,IAArB,EAA2B,CAAC,IAA5B,CADQ,EAER,IAAIxC,MAAMwC,OAAV,CAAkB,CAAlB,EAAqB,IAArB,EAA2B,IAA3B,CAFQ,EAGR,IAAIxC,MAAMwC,OAAV,CAAkB,CAAlB,EAAqB,CAAC,IAAtB,EAA4B,CAA5B,CAHQ,CAAZ;;AAMA,QAAIkM,QAAQ,CACR,IAAI1O,MAAMwC,OAAV,CAAkB,CAAC,IAAnB,EAAyB,CAAzB,EAA4B,IAA5B,CADQ,EAER,IAAIxC,MAAMwC,OAAV,CAAkB,CAAC,IAAnB,EAAyB,CAAzB,EAA4B,CAAC,IAA7B,CAFQ,EAGR,IAAIxC,MAAMwC,OAAV,CAAkB,IAAlB,EAAwB,CAAxB,EAA2B,CAA3B,CAHQ,CAAZ;;AAMA,QAAImO,QAAQ,CACR,IAAI3Q,MAAMwC,OAAV,CAAkB,IAAlB,EAAwB,CAAxB,EAA2B,CAAC,IAA5B,CADQ,EAER,IAAIxC,MAAMwC,OAAV,CAAkB,IAAlB,EAAwB,CAAxB,EAA2B,IAA3B,CAFQ,EAGR,IAAIxC,MAAMwC,OAAV,CAAkB,CAAC,IAAnB,EAAyB,CAAzB,EAA4B,CAA5B,CAHQ,CAAZ;;AAMA,QAAIyM,UAAU,IAAIjP,MAAMwC,OAAV,EAAd;AACA,QAAI0M,UAAU,IAAIlP,MAAMwC,OAAV,EAAd;AACA,QAAI2M,UAAU,IAAInP,MAAMwC,OAAV,EAAd;AACA,QAAI4M,UAAU,IAAIpP,MAAMwC,OAAV,EAAd;;AAEA,QAAI6M,UAAU,IAAIrP,MAAMwC,OAAV,EAAd;AACA,QAAI8M,UAAU,IAAItP,MAAMwC,OAAV,EAAd;AACA,QAAI+M,UAAU,IAAIvP,MAAMwC,OAAV,EAAd;AACA,QAAIgN,UAAU,IAAIxP,MAAMwC,OAAV,EAAd;;AAEA,aAASiN,YAAT,CAAsBX,KAAtB,EAA6BgB,SAA7B,EAAwCC,OAAxC,EAAiD;;AAE7C,aAAK,IAAIf,IAAI,CAAR,EAAWU,KAAKZ,MAAMjM,MAA3B,EAAmCmM,IAAIU,EAAvC,EAA2CV,GAA3C,EAAgD;;AAE5C,gBAAIW,SAASb,MAAME,CAAN,CAAb;AACA,gBAAIY,SAASd,MAAM,CAAEE,IAAI,CAAN,IAAYU,EAAlB,CAAb;;AAEAT,oBAAQlI,IAAR,CAAa4I,MAAb;AACAV,oBAAQF,eAAR,CAAwBrN,UAAxB;AACAuN,oBAAQ1E,GAAR,CAAYuF,SAAZ;;AAEAZ,oBAAQnI,IAAR,CAAa6I,MAAb;AACAV,oBAAQH,eAAR,CAAwBrN,UAAxB;AACAwN,oBAAQ3E,GAAR,CAAYuF,SAAZ;;AAEAX,oBAAQpI,IAAR,CAAa6I,MAAb;AACAT,oBAAQJ,eAAR,CAAwBrN,UAAxB;AACAyN,oBAAQ5E,GAAR,CAAYwF,OAAZ;;AAEAX,oBAAQrI,IAAR,CAAa4I,MAAb;AACAP,oBAAQL,eAAR,CAAwBrN,UAAxB;AACA0N,oBAAQ7E,GAAR,CAAYwF,OAAZ;;AAEAxC,qBAASgB,IAAT,CAAcU,QAAQ7I,CAAtB,EAAyB6I,QAAQ/M,CAAjC,EAAoC+M,QAAQ/D,CAA5C;AACAqC,qBAASgB,IAAT,CAAcW,QAAQ9I,CAAtB,EAAyB8I,QAAQhN,CAAjC,EAAoCgN,QAAQhE,CAA5C;AACAqC,qBAASgB,IAAT,CAAca,QAAQhJ,CAAtB,EAAyBgJ,QAAQlN,CAAjC,EAAoCkN,QAAQlE,CAA5C;;AAEAqC,qBAASgB,IAAT,CAAcW,QAAQ9I,CAAtB,EAAyB8I,QAAQhN,CAAjC,EAAoCgN,QAAQhE,CAA5C;AACAqC,qBAASgB,IAAT,CAAcY,QAAQ/I,CAAtB,EAAyB+I,QAAQjN,CAAjC,EAAoCiN,QAAQjE,CAA5C;AACAqC,qBAASgB,IAAT,CAAca,QAAQhJ,CAAtB,EAAyBgJ,QAAQlN,CAAjC,EAAoCkN,QAAQlE,CAA5C;;AAEA;;AAEAmE,oBAAQtI,IAAR,CAAa4I,MAAb;AACAN,oBAAQN,eAAR,CAAwBrN,UAAxB;AACA2N,oBAAQ1D,SAAR;;AAEA2D,oBAAQvI,IAAR,CAAa6I,MAAb;AACAN,oBAAQP,eAAR,CAAwBrN,UAAxB;AACA4N,oBAAQ3D,SAAR;;AAEA4D,oBAAQxI,IAAR,CAAa6I,MAAb;AACAL,oBAAQR,eAAR,CAAwBrN,UAAxB;AACA6N,oBAAQ5D,SAAR;;AAEA6D,oBAAQzI,IAAR,CAAa4I,MAAb;AACAH,oBAAQT,eAAR,CAAwBrN,UAAxB;AACA8N,oBAAQ7D,SAAR;;AAEA6B,oBAAQe,IAAR,CAAac,QAAQjJ,CAArB,EAAwBiJ,QAAQnN,CAAhC,EAAmCmN,QAAQnE,CAA3C;AACAsC,oBAAQe,IAAR,CAAae,QAAQlJ,CAArB,EAAwBkJ,QAAQpN,CAAhC,EAAmCoN,QAAQpE,CAA3C;AACAsC,oBAAQe,IAAR,CAAaiB,QAAQpJ,CAArB,EAAwBoJ,QAAQtN,CAAhC,EAAmCsN,QAAQtE,CAA3C;;AAEAsC,oBAAQe,IAAR,CAAae,QAAQlJ,CAArB,EAAwBkJ,QAAQpN,CAAhC,EAAmCoN,QAAQpE,CAA3C;AACAsC,oBAAQe,IAAR,CAAagB,QAAQnJ,CAArB,EAAwBmJ,QAAQrN,CAAhC,EAAmCqN,QAAQrE,CAA3C;AACAsC,oBAAQe,IAAR,CAAaiB,QAAQpJ,CAArB,EAAwBoJ,QAAQtN,CAAhC,EAAmCsN,QAAQtE,CAA3C;AAEH;AAEJ;;AAED,QAAI4E,YAAY,IAAI9P,MAAMwC,OAAV,EAAhB;AACA,QAAIuN,UAAU,IAAI/P,MAAMwC,OAAV,EAAd;;AAEA,SAAK,IAAI6L,IAAI,CAAb,EAAgBA,KAAKxO,SAArB,EAAgCwO,GAAhC,EAAqC;;AAEjCJ,cAAMlH,IAAN,CAAWnH,MAAMiL,UAAN,CAAiBwD,IAAIxO,SAArB,CAAX;AACA8M,gBAAQ5F,IAAR,CAAanH,MAAMwL,YAAN,CAAmBiD,IAAIxO,SAAvB,CAAb;;AAEA,YAAIyO,QAAQjI,KAAK6J,KAAL,CAAWvD,QAAQvG,CAAnB,EAAsBuG,QAAQzB,CAA9B,CAAZ;;AAEAxJ,mBAAWsM,gBAAX,CAA4BJ,EAA5B,EAAgCU,KAAhC;;AAEA;;AAEA,YAAIL,MAAM/L,CAAN,GAAU,EAAd,EAAkB;;AAEd4N,sBAAUlO,GAAV,CAAc,CAAC,IAAf,EAAqB,CAAC,IAAtB,EAA4B,CAA5B;AACAkO,sBAAUf,eAAV,CAA0BrN,UAA1B;AACAoO,sBAAUvF,GAAV,CAAc0D,KAAd;;AAEA8B,oBAAQnO,GAAR,CAAY,IAAZ,EAAkB,CAAC,IAAnB,EAAyB,CAAzB;AACAmO,oBAAQhB,eAAR,CAAwBrN,UAAxB;AACAqO,oBAAQxF,GAAR,CAAY0D,KAAZ;;AAEAwB,yBAAahB,KAAb,EAAoBqB,SAApB,EAA+BC,OAA/B;;AAEAD,sBAAUlO,GAAV,CAAc,CAAC,GAAf,EAAoB,CAAC,GAArB,EAA0B,CAA1B;AACAkO,sBAAUf,eAAV,CAA0BrN,UAA1B;AACAoO,sBAAUvF,GAAV,CAAc0D,KAAd;;AAEA8B,oBAAQnO,GAAR,CAAY,CAAC,GAAb,EAAkB,CAACqM,MAAM/L,CAAzB,EAA4B,CAA5B;AACA6N,oBAAQhB,eAAR,CAAwBrN,UAAxB;AACAqO,oBAAQxF,GAAR,CAAY0D,KAAZ;;AAEAwB,yBAAaf,KAAb,EAAoBoB,SAApB,EAA+BC,OAA/B;;AAEAD,sBAAUlO,GAAV,CAAc,GAAd,EAAmB,CAAC,GAApB,EAAyB,CAAzB;AACAkO,sBAAUf,eAAV,CAA0BrN,UAA1B;AACAoO,sBAAUvF,GAAV,CAAc0D,KAAd;;AAEA8B,oBAAQnO,GAAR,CAAY,GAAZ,EAAiB,CAACqM,MAAM/L,CAAxB,EAA2B,CAA3B;AACA6N,oBAAQhB,eAAR,CAAwBrN,UAAxB;AACAqO,oBAAQxF,GAAR,CAAY0D,KAAZ;;AAEAwB,yBAAakB,KAAb,EAAoBb,SAApB,EAA+BC,OAA/B;AAEH,SAhCD,MAgCO;;AAEHD,sBAAUlO,GAAV,CAAc,CAAd,EAAiB,CAAC,GAAlB,EAAuB,CAAvB;AACAkO,sBAAUf,eAAV,CAA0BrN,UAA1B;AACAoO,sBAAUvF,GAAV,CAAc0D,KAAd;;AAEA8B,oBAAQnO,GAAR,CAAY,CAAZ,EAAe,CAACqM,MAAM/L,CAAtB,EAAyB,CAAzB;AACA6N,oBAAQhB,eAAR,CAAwBrN,UAAxB;AACAqO,oBAAQxF,GAAR,CAAY0D,KAAZ;;AAEAwB,yBAAakB,KAAb,EAAoBb,SAApB,EAA+BC,OAA/B;AAEH;AAEJ;;AAED,SAAKI,YAAL,CAAkB,UAAlB,EAA8B,IAAInQ,MAAMoQ,eAAV,CAA0B,IAAIC,YAAJ,CAAiB9C,QAAjB,CAA1B,EAAsD,CAAtD,CAA9B;AACA,SAAK4C,YAAL,CAAkB,QAAlB,EAA4B,IAAInQ,MAAMoQ,eAAV,CAA0B,IAAIC,YAAJ,CAAiB7C,OAAjB,CAA1B,EAAqD,CAArD,CAA5B;AACH;;AAEDkD,6BAA6BJ,SAA7B,GAAyCC,OAAOC,MAAP,CAAcxQ,MAAMqN,cAAN,CAAqBiD,SAAnC,CAAzC;;AAEA,yDAAeI,4BAAf,E;;;;;;;;;AC7KA;;AAEO,SAAS1E,8BAAT,CAAwCpM,KAAxC,EAA+CC,SAA/C,EAA0D;AAC7D,UAAMC,WAAW,IAAI,0DAAJ,CAAgCF,KAAhC,EAAuCC,SAAvC,CAAjB;AACA,UAAME,WAAW,IAAIC,MAAM4Q,iBAAV,CAA4B;AACzC1S,eAAO,QADkC,EACxB2S,YAAY,KADY,EACLC,aAAa;AADR,KAA5B,CAAjB;AAGA,UAAML,OAAO,IAAIzQ,MAAMI,IAAV,CAAeN,QAAf,EAAyBC,QAAzB,CAAb;;AAEA0Q,SAAKlT,QAAL,CAAc2E,CAAd,GAAkB,GAAlB;;AAEA,WAAOuO,IAAP;AACH,C;;;;;;;ACZD,SAASM,2BAAT,CAAqCnR,KAArC,EAA4CC,SAA5C,EAAuD;;AAEnDG,UAAMqN,cAAN,CAAqBC,IAArB,CAA0B,IAA1B;;AAEA,QAAIC,WAAW,EAAf;;AAEA,QAAIK,KAAK,IAAI5N,MAAMwC,OAAV,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,CAAT;AACA,QAAIqL,UAAU,IAAI7N,MAAMwC,OAAV,EAAd;;AAEA,QAAId,aAAa,IAAI1B,MAAM8N,UAAV,EAAjB;AACA,QAAIC,iBAAiB,IAAI/N,MAAM8N,UAAV,EAArB;AACAC,mBAAeC,gBAAf,CAAgCJ,EAAhC,EAAoCvH,KAAK+C,EAAL,GAAU,CAA9C;;AAEA,QAAI6E,QAAQ,IAAIjO,MAAMwC,OAAV,EAAZ;;AAEA,QAAI0L,YAAY,IAAIlO,MAAMwC,OAAV,EAAhB;AACA0L,cAAUnH,IAAV,CAAenH,MAAMiL,UAAN,CAAiB,CAAjB,CAAf;AACAqD,cAAUhM,CAAV,GAAc,CAAd;;AAEA,QAAI+M,UAAU,IAAIjP,MAAMwC,OAAV,EAAd;AACA,QAAI0M,UAAU,IAAIlP,MAAMwC,OAAV,EAAd;AACA,QAAI2M,UAAU,IAAInP,MAAMwC,OAAV,EAAd;AACA,QAAI4M,UAAU,IAAIpP,MAAMwC,OAAV,EAAd;;AAEA,SAAK,IAAI6L,IAAI,CAAb,EAAgBA,KAAKxO,SAArB,EAAgCwO,GAAhC,EAAqC;;AAEjCJ,cAAMlH,IAAN,CAAWnH,MAAMiL,UAAN,CAAiBwD,IAAIxO,SAArB,CAAX;AACAoO,cAAM/L,CAAN,GAAU,CAAV;;AAEA2L,gBAAQmC,UAAR,CAAmB/B,KAAnB,EAA0BC,SAA1B;;AAEA,YAAII,QAAQjI,KAAK6J,KAAL,CAAWrC,QAAQzH,CAAnB,EAAsByH,QAAQ3C,CAA9B,CAAZ;;AAEAxJ,mBAAWsM,gBAAX,CAA4BJ,EAA5B,EAAgCU,KAAhC;;AAEAW,gBAAQrN,GAAR,CAAY,CAAC,GAAb,EAAkB,CAAlB,EAAqB,CAArB;AACAqN,gBAAQF,eAAR,CAAwBrN,UAAxB;AACAuN,gBAAQ1E,GAAR,CAAY0D,KAAZ;;AAEAiB,gBAAQtN,GAAR,CAAY,GAAZ,EAAiB,CAAjB,EAAoB,CAApB;AACAsN,gBAAQH,eAAR,CAAwBrN,UAAxB;AACAwN,gBAAQ3E,GAAR,CAAY0D,KAAZ;;AAEAkB,gBAAQvN,GAAR,CAAY,GAAZ,EAAiB,CAAjB,EAAoB,CAApB;AACAuN,gBAAQJ,eAAR,CAAwBhB,cAAxB;AACAoB,gBAAQ5E,GAAR,CAAY2D,SAAZ;;AAEAkB,gBAAQxN,GAAR,CAAY,CAAC,GAAb,EAAkB,CAAlB,EAAqB,CAArB;AACAwN,gBAAQL,eAAR,CAAwBhB,cAAxB;AACAqB,gBAAQ7E,GAAR,CAAY2D,SAAZ;;AAEAX,iBAASgB,IAAT,CAAcU,QAAQ7I,CAAtB,EAAyB6I,QAAQ/M,CAAjC,EAAoC+M,QAAQ/D,CAA5C;AACAqC,iBAASgB,IAAT,CAAcW,QAAQ9I,CAAtB,EAAyB8I,QAAQhN,CAAjC,EAAoCgN,QAAQhE,CAA5C;AACAqC,iBAASgB,IAAT,CAAca,QAAQhJ,CAAtB,EAAyBgJ,QAAQlN,CAAjC,EAAoCkN,QAAQlE,CAA5C;;AAEAqC,iBAASgB,IAAT,CAAcW,QAAQ9I,CAAtB,EAAyB8I,QAAQhN,CAAjC,EAAoCgN,QAAQhE,CAA5C;AACAqC,iBAASgB,IAAT,CAAcY,QAAQ/I,CAAtB,EAAyB+I,QAAQjN,CAAjC,EAAoCiN,QAAQjE,CAA5C;AACAqC,iBAASgB,IAAT,CAAca,QAAQhJ,CAAtB,EAAyBgJ,QAAQlN,CAAjC,EAAoCkN,QAAQlE,CAA5C;;AAEAgD,kBAAUnH,IAAV,CAAekH,KAAf;AACAF,uBAAehH,IAAf,CAAoBrF,UAApB;AAEH;;AAED,SAAKyO,YAAL,CAAkB,UAAlB,EAA8B,IAAInQ,MAAMoQ,eAAV,CAA0B,IAAIC,YAAJ,CAAiB9C,QAAjB,CAA1B,EAAsD,CAAtD,CAA9B;AAEH;;AAEDwD,4BAA4BT,SAA5B,GAAwCC,OAAOC,MAAP,CAAcxQ,MAAMqN,cAAN,CAAqBiD,SAAnC,CAAxC;;AAEA,yDAAeS,2BAAf,E;;;;;;;;ACtEO,SAAS9E,iBAAT,CAA2B5G,KAA3B,EAAkCvG,KAAlC,EAAyCuE,MAAzC,EAAiD;AACpD,UAAMvD,WAAW,IAAIE,MAAMgR,mBAAV,CAA8BlS,KAA9B,EAAqCuE,MAArC,EAA6C,EAA7C,EAAiD,EAAjD,CAAjB;AACAvD,aAASkC,WAAT,CAAqB,IAAIhC,MAAMS,OAAV,GAAoBwQ,aAApB,CAAkC,CAAC5K,KAAK+C,EAAN,GAAW,CAA7C,CAArB;;AAEA,UAAM8H,YAAYpR,SAASqR,UAAT,CAAoB5T,QAApB,CAA6B6T,KAA/C;AACA,UAAMC,SAAS,IAAIrR,MAAMwC,OAAV,EAAf;;AAEA,SAAK,IAAI6L,IAAI,CAAb,EAAgBA,IAAI6C,UAAUrO,MAA9B,EAAsCwL,KAAK,CAA3C,EAA8C;AAC1CgD,eAAO1P,SAAP,CAAiBuP,SAAjB,EAA4B7C,CAA5B;AACAgD,eAAOjL,CAAP,IAAYC,KAAKiL,MAAL,KAAgB,EAAhB,GAAqB,CAAjC;AACAD,eAAOnG,CAAP,IAAY7E,KAAKiL,MAAL,KAAgB,EAAhB,GAAqB,CAAjC;AACA,cAAMC,WAAaF,OAAOG,UAAP,CAAkBnM,MAAM9H,QAAxB,IAAoC,CAAtC,GAA4C,EAA7D;AACA8T,eAAOnP,CAAP,GAAWmE,KAAKiL,MAAL,KAAgBjL,KAAKkF,GAAL,CAAS,CAAT,EAAYgG,QAAZ,CAA3B;AACAF,eAAOI,OAAP,CAAeP,SAAf,EAA0B7C,CAA1B;AACH;AACDvO,aAAS4R,oBAAT;;AAEA,UAAM3R,WAAW,IAAIC,MAAM2R,mBAAV,CAA8B;AAC3CzT,eAAO;AADoC,KAA9B,CAAjB;;AAIA,UAAMuS,OAAO,IAAIzQ,MAAMI,IAAV,CAAgBN,QAAhB,EAA0BC,QAA1B,CAAb;AACAsF,UAAMkF,GAAN,CAAUkG,IAAV;AACH,C","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c1952b890b72fbd4bcb0","export function isWebVRAvailable() {\n    return navigator.getVRDisplays !== undefined;\n}\n\nexport function getVRDisplay(callback) {\n    if (!isWebVRAvailable()) {\n        callback('browser not support vr display', null);\n        return;\n    }\n\n    navigator\n        .getVRDisplays()\n        .then((displays) => {\n            callback(null, displays[0]);\n        })\n        .catch((error) => {\n            callback(error, null);\n        });\n}\n\nexport function getHelpMessageElement(callback) {\n    const makeMessageElement = (message) => {\n        const container = document.createElement('div');\n        container.style.position = 'absolute';\n        container.style.left = '0';\n        container.style.top = '0';\n        container.style.right = '0';\n        container.style.zIndex = '999';\n        container.align = 'center';\n\n        const error = document.createElement('div');\n        error.style.fontFamily = 'sans-serif';\n        error.style.fontSize = '16px';\n        error.style.fontStyle = 'normal';\n        error.style.lineHeight = '26px';\n        error.style.backgroundColor = '#fff';\n        error.style.color = '#000';\n        error.style.padding = '10px 20px';\n        error.style.margin = '50px';\n        error.style.display = 'inline-block';\n        error.innerHTML = message;\n        container.appendChild(error);\n\n        callback(container);\n    };\n\n    getVRDisplay((err, vrDisplay) => {\n        if (err) {\n            makeMessageElement('Your browser does not support WebVR. See <a href=\"http://webvr.info\">webvr.info</a> for assistance.');\n        } else if (!vrDisplay) {\n            makeMessageElement('WebVR supported, but no VRDisplays found.');\n        } else {\n            callback(null);\n        }\n    });\n}\n\nexport function getButton(display, canvas) {\n    const button = document.createElement('button');\n    button.style.position = 'absolute';\n    button.style.left = 'calc(50% - 50px)';\n    button.style.bottom = '20px';\n    button.style.width = '100px';\n    button.style.border = '0';\n    button.style.padding = '8px';\n    button.style.cursor = 'pointer';\n    button.style.backgroundColor = '#000';\n    button.style.color = '#fff';\n    button.style.fontFamily = 'sans-serif';\n    button.style.fontSize = '13px';\n    button.style.fontStyle = 'normal';\n    button.style.textAlign = 'center';\n    button.style.zIndex = '999';\n\n    if (display) {\n        button.textContent = 'ENTER VR';\n        button.onclick = function onButtonClick() {\n            display.isPresenting ? display.exitPresent() : display.requestPresent([{ source: canvas }]);\n        };\n\n        window.addEventListener('vrdisplaypresentchange', () => {\n            button.textContent = display.isPresenting ? 'EXIT VR' : 'ENTER VR';\n        });\n    } else {\n        button.textContent = 'NO VR DISPLAY';\n    }\n\n    return button;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/vr/utils.js","import RollerCoasterGeometry from './roller-coaster';\n\nexport function rollerCoasterMeshFactory(curve, divisions) {\n    const geometry = new RollerCoasterGeometry(curve, divisions);\n    const material = new THREE.MeshPhongMaterial({\n        vertexColors: THREE.VertexColors\n    });\n\n    return new THREE.Mesh(geometry, material);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/roller-coaster/index.js","import { isWebVRAvailable, getVRDisplay } from './utils';\n\nclass VRControl {\n    constructor(object) {\n        this.object = object;\n\n        this.standingMatrix = new THREE.Matrix4();\n        this.scale = 1;\n        this.standing = false;\n        this.userHeight = 1.6;\n        this.frameData = null;\n    }\n\n    init(onError) {\n        if ('VRFrameData' in window) {\n            this.frameData = new window.VRFrameData();\n        }\n\n        if (isWebVRAvailable()) {\n            getVRDisplay((err, vrDisplay) => {\n                if (err) {\n                    console.warn(err);\n                } else if (!vrDisplay) {\n                    onError('VR input not available.');\n                } else {\n                    this.vrDisplay = vrDisplay;\n                }\n            });\n        }\n    }\n\n    getVRDisplay() {\n        return this.vrDisplay;\n    }\n\n    setVRDisplay(value) {\n        this.vrDisplay = value;\n    }\n\n    getStandingMaxtrix() {\n        return this.standingMatrix;\n    }\n\n    update() {\n        if (!this.vrDisplay) {\n            return;\n        }\n\n        this.vrDisplay.getFrameData(this.frameData);\n\n        const pose = this.frameData.pose;\n\n        if (pose.orientation !== null) {\n            this.object.quaternion.fromArray(pose.orientation);\n        }\n\n        if (pose.position !== null) {\n            this.object.position.fromArray(pose.position);\n        } else {\n            this.object.position.set(0, 0, 0);\n        }\n\n        if (this.standing) {\n            if (this.vrDisplay.stageParameters) {\n                this.object.updateMatrix();\n                this.standingMatrix.fromArray(this.vrDisplay.stageParameters.sittingToStandingTransform);\n                this.object.applyMatrix(this.standingMatrix);\n            } else {\n                this.object.position.setY(this.object.position.y + this.userHeight);\n            }\n        }\n    }\n\n    dispose() {\n        this.vrDisplay = null;\n    }\n}\n\nexport default VRControl;\n\n\n\n// WEBPACK FOOTER //\n// ./src/vr/control.js","/*\nclass VREffect {\n    constructor(renderer) {\n        this.renderer = renderer;\n\n        this.vrDisplay = null;\n        this.frameData = null;\n\n        this.eyeTranslationL = new THREE.Vector3();\n        this.eyeTranslationR = new THREE.Vector3();\n\n        this.isPresenting = false;\n\n        this.rendererSize = renderer.getSize();\n        this.rendererUpdateStyle = false;\n        this.rendererPixelRatio = renderer.getPixelRatio();\n\n        this.canvas = renderer.domElement;\n        this.defaultLeftBounds = [0.0, 0.0, 0.5, 1.0];\n        this.defaultRightBounds = [0.5, 0.0, 0.5, 1.0];\n\n        this.autoSubmitFrame = true;\n    }\n\n    _onVRDisplayPresentChange() {\n        const wasPresenting = this.isPresenting;\n        this.isPresenting = !!this.vrDisplay && this.vrDisplay.isPresenting;\n\n        if (this.isPresenting) {\n            const eyeParamsL = this.vrDisplay.getEyeParameters('left');\n            const eyeWidth = eyeParamsL.renderWidth;\n            const eyeHeight = eyeParamsL.renderHeight;\n\n            if (!wasPresenting) {\n                this.rendererPixelRatio = this.renderer.getPixelRatio();\n                this.rendererSize = this.renderer.getSize();\n\n                this.renderer.setPixelRatio(1);\n                this.renderer.setSize(eyeWidth * 2, eyeHeight, false);\n            }\n        } else if (wasPresenting) {\n            this.renderer.setPixelRatio(this.rendererPixelRatio);\n            this.renderer.setSize(this.rendererSize.width, this.rendererSize.height, this.rendererUpdateStyle);\n        }\n    }\n\n    init(onError) {\n        if ('VRFrameData' in window) {\n            this.frameData = new window.VRFrameData();\n        }\n\n        if (isWebVRAvailable()) {\n            getVRDisplay((err, vrDisplay) => {\n                if (err || !vrDisplay) {\n                    onError('HMD not available');\n                } else {\n                    this.vrDisplay = vrDisplay;\n                }\n            });\n        }\n\n        window.addEventListener('vrdisplaypresentchange', () => {\n            this._onVRDisplayPresentChange();\n        });\n    }\n\n    getVRDisplay() {\n        return this.vrDisplay;\n    }\n\n    setVRDisplay(value) {\n        this.vrDisplay = value;\n    }\n\n    setSize(width, height, updateStyle) {\n        this.rendererSize = { width, height };\n        this.rendererUpdateStyle = updateStyle;\n\n        if (this.isPresenting) {\n            const eyeParamsL = this.vrDisplay.getEyeParameters('left');\n\n            this.renderer.setPixelRatio(1);\n            this.renderer.setSize(eyeParamsL.renderWidth * 2, eyeParamsL.renderHeight, false);\n\n        } else {\n            this.renderer.setPixelRatio(this.rendererPixelRatio);\n            this.renderer.setSize(width, height, updateStyle);\n        }\n    }\n\n    setFullScreen(boolean) {\n        return new Promise((resolve) => {\n            if (this.isPresenting === boolean) {\n                resolve();\n                return;\n            }\n\n            if (boolean) {\n                resolve(this.vrDisplay.requestPresent({ source: this.canvas }));\n            } else {\n                resolve(this.vrDisplay.exitPresent());\n            }\n        });\n    }\n\n    requestPresent() {\n        return this.setFullScreen(true);\n    }\n\n    exitPresent() {\n        return this.setFullScreen(false);\n    }\n\n    requestAnimationFrame(f) {\n        if (this.vrDisplay) {\n            return this.vrDisplay.requestAnimationFrame(f);\n        }\n\n        return window.requestAnimationFrame(f);\n    }\n\n    cancelAnimationFrame(h) {\n        if (this.vrDisplay) {\n            this.vrDisplay.cancelAnimationFrame(h);\n        } else {\n            window.cancelAnimationFrame(h);\n        }\n    }\n\n    submitFrame() {\n        if (this.vrDisplay && this.isPresenting) {\n            this.vrDisplay.submitFrame();\n        }\n    }\n\n    render(scene, camera, renderTarget, forceClear) {\n        const cameraL = new THREE.PerspectiveCamera();\n        const cameraR = new THREE.PerspectiveCamera();\n\n        cameraL.layers.enable(1);\n        cameraR.layers.enable(2);\n\n        if (this.vrDisplay && this.isPresenting) {\n            const autoUpdate = scene.autoUpdate;\n\n            if (autoUpdate) {\n                scene.updateMatrixWorld();\n                scene.autoUpdate = false;\n            }\n\n            const eyeParamsL = this.vrDisplay.getEyeParameters('left');\n            const eyeParamsR = this.vrDisplay.getEyeParameters('right');\n\n            this.eyeTranslationL.fromArray(eyeParamsL.offset);\n            this.eyeTranslationR.fromArray(eyeParamsR.offset);\n\n            const size = this.renderer.getSize();\n            const layers = this.vrDisplay.getLayers();\n\n            let leftBounds;\n            let rightBounds;\n\n            if (layers.length) {\n                const layer = layers[0];\n\n                leftBounds = layer.leftBounds !== null && layer.leftBounds.length === 4 ? layer.leftBounds : this.defaultLeftBounds;\n                rightBounds = layer.rightBounds !== null && layer.rightBounds.length === 4 ? layer.rightBounds : this.defaultRightBounds;\n\n            } else {\n                leftBounds = defaultLeftBounds;\n                rightBounds = defaultRightBounds;\n            }\n\n            const renderReactL = {\n                x: Math.round(size.width * leftBounds[0]),\n                y: Math.round(size.height * leftBounds[1]),\n                width: Math.round(size.width * leftBounds[2]),\n                height: Math.round(size.height * leftBounds[3])\n            };\n\n            const renderRectR = {\n                x: Math.round(size.width * rightBounds[0]),\n                y: Math.round(size.height * rightBounds[1]),\n                width: Math.round(size.width * rightBounds[2]),\n                height: Math.round(size.height * rightBounds[3])\n            };\n\n            if (renderTarget) {\n                this.renderer.setRenderTarget(renderTarget);\n                renderTarget.scissorTest = true;\n            } else {\n                this.renderer.setRenderTarget(null);\n                this.renderer.setScissorTest(true);\n            }\n\n            if (this.renderer.autoClear || forceClear) {\n                this.renderer.clear();\n            }\n\n            if (camera.parent === null) {\n                camera.updateMatrixWorld();\n            }\n\n            camera.matrixWorld.decompose(cameraL.position, cameraL.quaternion, cameraL.scale);\n\n            cameraR.position.copy(cameraL.position);\n            cameraR.quaternion.copy(cameraL.quaternion);\n            cameraR.scale.copy(cameraL.scale);\n\n            cameraL.translateOnAxis(this.eyeTranslationL, cameraL.scale.x);\n            cameraR.translateOnAxis(this.eyeTranslationR, cameraR.scale.x);\n\n            if (this.vrDisplay.getFrameData) {\n\n            }\n        }\n    }\n}\n*/\n\nfunction VREffect(renderer, onError) {\n\n    var vrDisplay, vrDisplays;\n    var eyeTranslationL = new THREE.Vector3();\n    var eyeTranslationR = new THREE.Vector3();\n    var renderRectL, renderRectR;\n\n    var frameData = null;\n\n    if ('VRFrameData' in window) {\n\n        frameData = new window.VRFrameData();\n\n    }\n\n    function gotVRDisplays(displays) {\n\n        vrDisplays = displays;\n\n        if (displays.length > 0) {\n\n            vrDisplay = displays[0];\n\n        } else {\n\n            if (onError) onError('HMD not available');\n\n        }\n\n    }\n\n    if (navigator.getVRDisplays) {\n\n        navigator.getVRDisplays().then(gotVRDisplays).catch(function () {\n\n            console.warn('THREE.VREffect: Unable to get VR Displays');\n\n        });\n\n    }\n\n    //\n\n    this.isPresenting = false;\n\n    var scope = this;\n\n    var rendererSize = renderer.getSize();\n    var rendererUpdateStyle = false;\n    var rendererPixelRatio = renderer.getPixelRatio();\n\n    this.getVRDisplay = function () {\n\n        return vrDisplay;\n\n    };\n\n    this.setVRDisplay = function (value) {\n\n        vrDisplay = value;\n\n    };\n\n    this.getVRDisplays = function () {\n\n        console.warn('THREE.VREffect: getVRDisplays() is being deprecated.');\n        return vrDisplays;\n\n    };\n\n    this.setSize = function (width, height, updateStyle) {\n\n        rendererSize = {width: width, height: height};\n        rendererUpdateStyle = updateStyle;\n\n        if (scope.isPresenting) {\n\n            var eyeParamsL = vrDisplay.getEyeParameters('left');\n            renderer.setPixelRatio(1);\n            renderer.setSize(eyeParamsL.renderWidth * 2, eyeParamsL.renderHeight, false);\n\n        } else {\n\n            renderer.setPixelRatio(rendererPixelRatio);\n            renderer.setSize(width, height, updateStyle);\n\n        }\n\n    };\n\n    // VR presentation\n\n    var canvas = renderer.domElement;\n    var defaultLeftBounds = [0.0, 0.0, 0.5, 1.0];\n    var defaultRightBounds = [0.5, 0.0, 0.5, 1.0];\n\n    function onVRDisplayPresentChange() {\n\n        var wasPresenting = scope.isPresenting;\n        scope.isPresenting = vrDisplay !== undefined && vrDisplay.isPresenting;\n\n        if (scope.isPresenting) {\n\n            var eyeParamsL = vrDisplay.getEyeParameters('left');\n            var eyeWidth = eyeParamsL.renderWidth;\n            var eyeHeight = eyeParamsL.renderHeight;\n\n            if (!wasPresenting) {\n\n                rendererPixelRatio = renderer.getPixelRatio();\n                rendererSize = renderer.getSize();\n\n                renderer.setPixelRatio(1);\n                renderer.setSize(eyeWidth * 2, eyeHeight, false);\n\n            }\n\n        } else if (wasPresenting) {\n\n            renderer.setPixelRatio(rendererPixelRatio);\n            renderer.setSize(rendererSize.width, rendererSize.height, rendererUpdateStyle);\n\n        }\n\n    }\n\n    window.addEventListener('vrdisplaypresentchange', onVRDisplayPresentChange, false);\n\n    this.setFullScreen = function (boolean) {\n\n        return new Promise(function (resolve, reject) {\n\n            if (vrDisplay === undefined) {\n\n                reject(new Error('No VR hardware found.'));\n                return;\n\n            }\n\n            if (scope.isPresenting === boolean) {\n\n                resolve();\n                return;\n\n            }\n\n            if (boolean) {\n\n                resolve(vrDisplay.requestPresent([{source: canvas}]));\n\n            } else {\n\n                resolve(vrDisplay.exitPresent());\n\n            }\n\n        });\n\n    };\n\n    this.requestPresent = function () {\n\n        return this.setFullScreen(true);\n\n    };\n\n    this.exitPresent = function () {\n\n        return this.setFullScreen(false);\n\n    };\n\n    this.requestAnimationFrame = function (f) {\n\n        if (vrDisplay !== undefined) {\n\n            return vrDisplay.requestAnimationFrame(f);\n\n        } else {\n\n            return window.requestAnimationFrame(f);\n\n        }\n\n    };\n\n    this.cancelAnimationFrame = function (h) {\n\n        if (vrDisplay !== undefined) {\n\n            vrDisplay.cancelAnimationFrame(h);\n\n        } else {\n\n            window.cancelAnimationFrame(h);\n\n        }\n\n    };\n\n    this.submitFrame = function () {\n\n        if (vrDisplay !== undefined && scope.isPresenting) {\n\n            vrDisplay.submitFrame();\n\n        }\n\n    };\n\n    this.autoSubmitFrame = true;\n\n    // render\n\n    var cameraL = new THREE.PerspectiveCamera();\n    cameraL.layers.enable(1);\n\n    var cameraR = new THREE.PerspectiveCamera();\n    cameraR.layers.enable(2);\n\n    this.render = function (scene, camera, renderTarget, forceClear) {\n\n        if (vrDisplay && scope.isPresenting) {\n\n            var autoUpdate = scene.autoUpdate;\n\n            if (autoUpdate) {\n\n                scene.updateMatrixWorld();\n                scene.autoUpdate = false;\n\n            }\n\n            var eyeParamsL = vrDisplay.getEyeParameters('left');\n            var eyeParamsR = vrDisplay.getEyeParameters('right');\n\n            eyeTranslationL.fromArray(eyeParamsL.offset);\n            eyeTranslationR.fromArray(eyeParamsR.offset);\n\n            if (Array.isArray(scene)) {\n\n                console.warn('THREE.VREffect.render() no longer supports arrays. Use object.layers instead.');\n                scene = scene[0];\n\n            }\n\n            // When rendering we don't care what the recommended size is, only what the actual size\n            // of the backbuffer is.\n            var size = renderer.getSize();\n            var layers = vrDisplay.getLayers();\n            var leftBounds;\n            var rightBounds;\n\n            if (layers.length) {\n\n                var layer = layers[0];\n\n                leftBounds = layer.leftBounds !== null && layer.leftBounds.length === 4 ? layer.leftBounds : defaultLeftBounds;\n                rightBounds = layer.rightBounds !== null && layer.rightBounds.length === 4 ? layer.rightBounds : defaultRightBounds;\n\n            } else {\n\n                leftBounds = defaultLeftBounds;\n                rightBounds = defaultRightBounds;\n\n            }\n\n            renderRectL = {\n                x: Math.round(size.width * leftBounds[0]),\n                y: Math.round(size.height * leftBounds[1]),\n                width: Math.round(size.width * leftBounds[2]),\n                height: Math.round(size.height * leftBounds[3])\n            };\n            renderRectR = {\n                x: Math.round(size.width * rightBounds[0]),\n                y: Math.round(size.height * rightBounds[1]),\n                width: Math.round(size.width * rightBounds[2]),\n                height: Math.round(size.height * rightBounds[3])\n            };\n\n            if (renderTarget) {\n\n                renderer.setRenderTarget(renderTarget);\n                renderTarget.scissorTest = true;\n\n            } else {\n\n                renderer.setRenderTarget(null);\n                renderer.setScissorTest(true);\n\n            }\n\n            if (renderer.autoClear || forceClear) renderer.clear();\n\n            if (camera.parent === null) camera.updateMatrixWorld();\n\n            camera.matrixWorld.decompose(cameraL.position, cameraL.quaternion, cameraL.scale);\n\n            cameraR.position.copy(cameraL.position);\n            cameraR.quaternion.copy(cameraL.quaternion);\n            cameraR.scale.copy(cameraL.scale);\n\n            cameraL.translateOnAxis(eyeTranslationL, cameraL.scale.x);\n            cameraR.translateOnAxis(eyeTranslationR, cameraR.scale.x);\n\n            if (vrDisplay.getFrameData) {\n\n                vrDisplay.depthNear = camera.near;\n                vrDisplay.depthFar = camera.far;\n\n                vrDisplay.getFrameData(frameData);\n\n                cameraL.projectionMatrix.elements = frameData.leftProjectionMatrix;\n                cameraR.projectionMatrix.elements = frameData.rightProjectionMatrix;\n\n            } else {\n\n                cameraL.projectionMatrix = fovToProjection(eyeParamsL.fieldOfView, true, camera.near, camera.far);\n                cameraR.projectionMatrix = fovToProjection(eyeParamsR.fieldOfView, true, camera.near, camera.far);\n\n            }\n\n            // render left eye\n            if (renderTarget) {\n\n                renderTarget.viewport.set(renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height);\n                renderTarget.scissor.set(renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height);\n\n            } else {\n\n                renderer.setViewport(renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height);\n                renderer.setScissor(renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height);\n\n            }\n            renderer.render(scene, cameraL, renderTarget, forceClear);\n\n            // render right eye\n            if (renderTarget) {\n\n                renderTarget.viewport.set(renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height);\n                renderTarget.scissor.set(renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height);\n\n            } else {\n\n                renderer.setViewport(renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height);\n                renderer.setScissor(renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height);\n\n            }\n            renderer.render(scene, cameraR, renderTarget, forceClear);\n\n            if (renderTarget) {\n\n                renderTarget.viewport.set(0, 0, size.width, size.height);\n                renderTarget.scissor.set(0, 0, size.width, size.height);\n                renderTarget.scissorTest = false;\n                renderer.setRenderTarget(null);\n\n            } else {\n\n                renderer.setViewport(0, 0, size.width, size.height);\n                renderer.setScissorTest(false);\n\n            }\n\n            if (autoUpdate) {\n\n                scene.autoUpdate = true;\n\n            }\n\n            if (scope.autoSubmitFrame) {\n\n                scope.submitFrame();\n\n            }\n\n            return;\n\n        }\n\n        // Regular render mode if not HMD\n\n        renderer.render(scene, camera, renderTarget, forceClear);\n\n    };\n\n    this.dispose = function () {\n\n        window.removeEventListener('vrdisplaypresentchange', onVRDisplayPresentChange, false);\n\n    };\n\n    //\n\n    function fovToNDCScaleOffset(fov) {\n\n        var pxscale = 2.0 / ( fov.leftTan + fov.rightTan );\n        var pxoffset = ( fov.leftTan - fov.rightTan ) * pxscale * 0.5;\n        var pyscale = 2.0 / ( fov.upTan + fov.downTan );\n        var pyoffset = ( fov.upTan - fov.downTan ) * pyscale * 0.5;\n        return {scale: [pxscale, pyscale], offset: [pxoffset, pyoffset]};\n\n    }\n\n    function fovPortToProjection(fov, rightHanded, zNear, zFar) {\n\n        rightHanded = rightHanded === undefined ? true : rightHanded;\n        zNear = zNear === undefined ? 0.01 : zNear;\n        zFar = zFar === undefined ? 10000.0 : zFar;\n\n        var handednessScale = rightHanded ? -1.0 : 1.0;\n\n        // start with an identity matrix\n        var mobj = new THREE.Matrix4();\n        var m = mobj.elements;\n\n        // and with scale/offset info for normalized device coords\n        var scaleAndOffset = fovToNDCScaleOffset(fov);\n\n        // X result, map clip edges to [-w,+w]\n        m[0 * 4 + 0] = scaleAndOffset.scale[0];\n        m[0 * 4 + 1] = 0.0;\n        m[0 * 4 + 2] = scaleAndOffset.offset[0] * handednessScale;\n        m[0 * 4 + 3] = 0.0;\n\n        // Y result, map clip edges to [-w,+w]\n        // Y offset is negated because this proj matrix transforms from world coords with Y=up,\n        // but the NDC scaling has Y=down (thanks D3D?)\n        m[1 * 4 + 0] = 0.0;\n        m[1 * 4 + 1] = scaleAndOffset.scale[1];\n        m[1 * 4 + 2] = -scaleAndOffset.offset[1] * handednessScale;\n        m[1 * 4 + 3] = 0.0;\n\n        // Z result (up to the app)\n        m[2 * 4 + 0] = 0.0;\n        m[2 * 4 + 1] = 0.0;\n        m[2 * 4 + 2] = zFar / ( zNear - zFar ) * -handednessScale;\n        m[2 * 4 + 3] = ( zFar * zNear ) / ( zNear - zFar );\n\n        // W result (= Z in)\n        m[3 * 4 + 0] = 0.0;\n        m[3 * 4 + 1] = 0.0;\n        m[3 * 4 + 2] = handednessScale;\n        m[3 * 4 + 3] = 0.0;\n\n        mobj.transpose();\n        return mobj;\n\n    }\n\n    function fovToProjection(fov, rightHanded, zNear, zFar) {\n\n        var DEG2RAD = Math.PI / 180.0;\n\n        var fovPort = {\n            upTan: Math.tan(fov.upDegrees * DEG2RAD),\n            downTan: Math.tan(fov.downDegrees * DEG2RAD),\n            leftTan: Math.tan(fov.leftDegrees * DEG2RAD),\n            rightTan: Math.tan(fov.rightDegrees * DEG2RAD)\n        };\n\n        return fovPortToProjection(fovPort, rightHanded, zNear, zFar);\n\n    }\n\n}\n\nexport default VREffect;\n\n\n\n// WEBPACK FOOTER //\n// ./src/vr/effect.js","import { rollerCoasterMeshFactory } from './roller-coaster';\nimport { rollerCoasterLifterMeshFactory } from './roller-coaster-lifter';\nimport { rollerCoasterShadowMeshFactory } from './roller-coaster-shadow';\nimport { groundMeshFactory } from './ground';\nimport VRControl from './vr/control';\nimport VREffect from './vr/effect';\nimport * as vrUtils from './vr/utils';\n\nif (!vrUtils.isWebVRAvailable()) {\n    vrUtils.getHelpMessageElement((element) => {\n        document.body.appendChild(element);\n    });\n}\n\nconst renderer = new THREE.WebGLRenderer({ antialias: true });\nrenderer.setClearColor(0xf0f0ff);\nrenderer.setPixelRatio(window.devicePixelRatio);\nrenderer.setSize(window.innerWidth, window.innerHeight);\n\ndocument.body.appendChild(renderer.domElement);\n\nconst scene = new THREE.Scene();\n\n// Light\nconst light = new THREE.HemisphereLight(0xfff0f0, 0x606066);\nlight.position.set(1, 1, 1);\nscene.add(light);\n\n// Train\nconst train = new THREE.Object3D();\nscene.add(train);\nconst camera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 0.1, 500);\ntrain.add(camera);\n\n// Roller coaster rail\nconst PI2 = Math.PI * 2;\nconst curve = (() => {\n    const v1 = new THREE.Vector3();\n    const v2 = new THREE.Vector3();\n\n    return {\n        getPointAt(t) {\n            const p = t * PI2;\n\n            const x = Math.sin(p * 3) * Math.cos(p * 4) * 50;\n            const y = Math.sin(p * 10) * 2 + Math.cos(p * 17) * 2 + 5;\n            const z = Math.sin(p) * Math.sin(p * 4) * 50;\n\n            return v1.set(x, y, z).multiplyScalar(2);\n        },\n\n        getTangentAt(t) {\n            const delta = 0.00001;\n\n            const t1 = Math.max(0, t - delta);\n            const t2 = Math.min(1, t + delta);\n\n            return v2\n                .copy(this.getPointAt(t2))\n                .sub(this.getPointAt(t1))\n                .normalize();\n        }\n    }\n})();\n\nconst rollerCoasterMesh = rollerCoasterMeshFactory(curve, 1500);\nscene.add(rollerCoasterMesh);\n\n// Roller coaster lifters\nconst rollerCoasterLifterMesh = rollerCoasterLifterMeshFactory(curve, 100);\nscene.add(rollerCoasterLifterMesh);\n\n// Roller coaster shadow\nconst rollerCoasterShadowMesh = rollerCoasterShadowMeshFactory(curve, 500);\nscene.add(rollerCoasterShadowMesh);\n\n// Terrain\ngroundMeshFactory(scene, 500, 500);\nscene.background = new THREE.CubeTextureLoader()\n    .setPath('../images/')\n    .load(['left.bmp', 'right.bmp', 'top.bmp', 'bottom.bmp', 'front.bmp', 'back.bmp']);\n\n// VR\nconst control = new VRControl(camera);\nconst effect = new VREffect(renderer);\n\ncontrol.init();\n\nvrUtils.getVRDisplay((err, display) => {\n    if (err) {\n        return;\n    }\n\n    const buttonElem = vrUtils.getButton(display, renderer.domElement);\n    document.body.appendChild(buttonElem);\n});\n\nwindow.addEventListener('resize', () => {\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    effect.setSize(window.innerWidth, window.innerHeight);\n});\n\n\n// Animation\nconst position = new THREE.Vector3();\nconst tangent = new THREE.Vector3();\nconst lookAt = new THREE.Vector3();\n\nlet velocity = 0;\nlet progress = 0;\nlet prevTime = window.performance.now();\n\nfunction animate(time) {\n    effect.requestAnimationFrame(animate);\n\n    const delta = time - prevTime;\n\n    progress += velocity;\n    progress = progress % 1;\n    position.copy(curve.getPointAt(progress));\n    position.y += 0.3;\n    train.position.copy(position);\n    tangent.copy(curve.getTangentAt(progress));\n    velocity -= tangent.y * 0.0000001 * delta;\n    velocity = Math.max(0.00001, Math.min(0.0002, velocity));\n    train.lookAt(lookAt.copy(position).sub(tangent));\n\n    control.update();\n    effect.render(scene, camera);\n\n    prevTime = time;\n}\n\neffect.requestAnimationFrame(animate);\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","function RollerCoasterGeometry(curve, divisions) {\n\n    THREE.BufferGeometry.call(this);\n\n    var vertices = [];\n    var normals = [];\n    var colors = [];\n\n    //레일 그릴 때 필요한 색\n    var color1 = [1, 1, 1];\t//하얀색\n    var color2 = [1, 0.3, 0.2];\t//노란색\n\n    var up = new THREE.Vector3(0, 1, 0);\n    var forward = new THREE.Vector3();\n    var right = new THREE.Vector3();\n\n    //quaternion은 4x4 행렬을 의미함\n    var quaternion = new THREE.Quaternion();\n    var prevQuaternion = new THREE.Quaternion();\n    prevQuaternion.setFromAxisAngle(up, Math.PI / 2);\n\n    var point = new THREE.Vector3();\n    var prevPoint = new THREE.Vector3();\n    prevPoint.copy(curve.getPointAt(0));\n\n    // shapes\n    //가운데 레일 옆 세모 두 개\n    var step = [\n        //왼쪽 세모\n        new THREE.Vector3(-0.225, 0, 0),\n        new THREE.Vector3(0, -0.050, 0),\n        new THREE.Vector3(0, -0.175, 0),\n        //오른쪽 세모\n        new THREE.Vector3(0, -0.050, 0),\n        new THREE.Vector3(0.225, 0, 0),\n        new THREE.Vector3(0, -0.175, 0)\n    ];\n\n    var PI2 = Math.PI * 2; //360도\n    var step1 = [];\n    for (var i = 0; i < 5; i++) {\n\n        var angle = ( i / 5 ) * PI2;\t//angle이 72, 144, 216, 288, 360 다섯 가지가 됨\n        step1.push(new THREE.Vector3(0, Math.sin(angle) * 0.02, Math.cos(angle) * 0.02));\n\n    }\n\n    //가운데 레일에 관한 설정\n    var sides = 5;\t//오각 원통 모양을 의미하는 듯\n    var tube1 = [];\n\n    for (var i = 0; i < sides; i++) {\n\n        var angle = ( i / sides ) * PI2;\t//angle이 72, 144, 216, 288, 360 다섯 가지가 됨\n        tube1.push(new THREE.Vector3(Math.sin(angle) * 0.06, Math.cos(angle) * 0.06, 0));\t//0.06은 사이즈에 관한 상수 값, sin^2+cos^2 = 1\n\n    }\n    //양 옆의 레일에 관한 설정\n    var sides = 6;\t//육각 원통 모양을 의미하는 듯\n    var tube2 = [];\n\n    for (var i = 0; i < sides; i++) {\n\n        var angle = ( i / sides ) * PI2;\t//angle이 60, 120, 180, 240, 300, 360 여섯 가지가 됨\n        tube2.push(new THREE.Vector3(Math.sin(angle) * 0.025, Math.cos(angle) * 0.025, 0));\t//0.025라서 가운데 레일보다 사이즈가 작음\n\n    }\n\n    var vector = new THREE.Vector3();\n    var normal = new THREE.Vector3();\n\n    function drawShape(shape, color) {\t//해당 색을 가지는 도형 그리기\n\n        normal.set(0, 0, -1).applyQuaternion(quaternion);\t//normal vector가 이동 방향의 반대(우리가 앞을 볼 때 보이는 면)\n\n        for (var j = 0; j < shape.length; j++) {\n\n            vector.copy(shape[j]);\n            vector.applyQuaternion(quaternion);\n            vector.add(point);\n\n            vertices.push(vector.x, vector.y, vector.z);\n            normals.push(normal.x, normal.y, normal.z);\n            colors.push(color[0], color[1], color[2]);\n\n        }\n\n        normal.set(0, 0, 1).applyQuaternion(quaternion);\t//normal vector가 이동 방향(우리가 뒤를 볼 때 보이는 면)\n\n        for (var j = shape.length - 1; j >= 0; j--) {\n\n            vector.copy(shape[j]);\n            vector.applyQuaternion(quaternion);\n            vector.add(point);\n\n            vertices.push(vector.x, vector.y, vector.z);\n            normals.push(normal.x, normal.y, normal.z);\n            colors.push(color[0], color[1], color[2]);\n\n        }\n\n    };\n\n    var vector1 = new THREE.Vector3();\n    var vector2 = new THREE.Vector3();\n    var vector3 = new THREE.Vector3();\n    var vector4 = new THREE.Vector3();\n\n    var normal1 = new THREE.Vector3();\n    var normal2 = new THREE.Vector3();\n    var normal3 = new THREE.Vector3();\n    var normal4 = new THREE.Vector3();\n\n    function extrudeShape(shape, offset, color) {\t//얘는 삼각형 같은 평면도형을 그리는 drawShape는 다르게 레일처럼 입체도형을 그리는데 사용하는 듯.\n\n        for (var j = 0, jl = shape.length; j < jl; j++) {\n\n            var point1 = shape[j];\n            var point2 = shape[( j + 1 ) % jl];\n\n            vector1.copy(point1).add(offset);\n            vector1.applyQuaternion(quaternion);\n            vector1.add(point);\n\n            vector2.copy(point2).add(offset);\n            vector2.applyQuaternion(quaternion);\n            vector2.add(point);\n\n            vector3.copy(point2).add(offset);\n            vector3.applyQuaternion(prevQuaternion);\n            vector3.add(prevPoint);\n\n            vector4.copy(point1).add(offset);\n            vector4.applyQuaternion(prevQuaternion);\n            vector4.add(prevPoint);\n\n            vertices.push(vector1.x, vector1.y, vector1.z);\n            vertices.push(vector2.x, vector2.y, vector2.z);\n            vertices.push(vector4.x, vector4.y, vector4.z);\n\n            vertices.push(vector2.x, vector2.y, vector2.z);\n            vertices.push(vector3.x, vector3.y, vector3.z);\n            vertices.push(vector4.x, vector4.y, vector4.z);\n\n            //\n\n            normal1.copy(point1);\n            normal1.applyQuaternion(quaternion);\n            normal1.normalize();\n\n            normal2.copy(point2);\n            normal2.applyQuaternion(quaternion);\n            normal2.normalize();\n\n            normal3.copy(point2);\n            normal3.applyQuaternion(prevQuaternion);\n            normal3.normalize();\n\n            normal4.copy(point1);\n            normal4.applyQuaternion(prevQuaternion);\n            normal4.normalize();\n\n            normals.push(normal1.x, normal1.y, normal1.z);\n            normals.push(normal2.x, normal2.y, normal2.z);\n            normals.push(normal4.x, normal4.y, normal4.z);\n\n            normals.push(normal2.x, normal2.y, normal2.z);\n            normals.push(normal3.x, normal3.y, normal3.z);\n            normals.push(normal4.x, normal4.y, normal4.z);\n\n            colors.push(color[0], color[1], color[2]);\n            colors.push(color[0], color[1], color[2]);\n            colors.push(color[0], color[1], color[2]);\n\n            colors.push(color[0], color[1], color[2]);\n            colors.push(color[0], color[1], color[2]);\n            colors.push(color[0], color[1], color[2]);\n\n        }\n\n    };\n\n    function extrudeShapeSide(shape, fromPoint, toPoint, color) {\n\n        for (var j = 0, jl = shape.length; j < jl; j++) {\n\n            var point1 = shape[j];\n            var point2 = shape[( j + 1 ) % jl];\n\n            vector1.copy(point1);\n            vector1.applyQuaternion(quaternion);\n            vector1.add(fromPoint);\n\n            vector2.copy(point2);\n            vector2.applyQuaternion(quaternion);\n            vector2.add(fromPoint);\n\n            vector3.copy(point2);\n            vector3.applyQuaternion(quaternion);\n            vector3.add(toPoint);\n\n            vector4.copy(point1);\n            vector4.applyQuaternion(quaternion);\n            vector4.add(toPoint);\n\n            vertices.push(vector1.x, vector1.y, vector1.z);\n            vertices.push(vector2.x, vector2.y, vector2.z);\n            vertices.push(vector4.x, vector4.y, vector4.z);\n\n            vertices.push(vector2.x, vector2.y, vector2.z);\n            vertices.push(vector3.x, vector3.y, vector3.z);\n            vertices.push(vector4.x, vector4.y, vector4.z);\n\n            //\n\n            normal1.copy(point1);\n            normal1.applyQuaternion(quaternion);\n            normal1.normalize();\n\n            normal2.copy(point2);\n            normal2.applyQuaternion(quaternion);\n            normal2.normalize();\n\n            normal3.copy(point2);\n            normal3.applyQuaternion(quaternion);\n            normal3.normalize();\n\n            normal4.copy(point1);\n            normal4.applyQuaternion(quaternion);\n            normal4.normalize();\n\n            normals.push(normal1.x, normal1.y, normal1.z);\n            normals.push(normal2.x, normal2.y, normal2.z);\n            normals.push(normal4.x, normal4.y, normal4.z);\n\n            normals.push(normal2.x, normal2.y, normal2.z);\n            normals.push(normal3.x, normal3.y, normal3.z);\n            normals.push(normal4.x, normal4.y, normal4.z);\n\n            colors.push(color[0], color[1], color[2]);\n            colors.push(color[0], color[1], color[2]);\n            colors.push(color[0], color[1], color[2]);\n\n            colors.push(color[0], color[1], color[2]);\n            colors.push(color[0], color[1], color[2]);\n            colors.push(color[0], color[1], color[2]);\n\n        }\n\n    };\n\n    var offset = new THREE.Vector3();\n    var fromPoint = new THREE.Vector3();\n    var toPoint = new THREE.Vector3();\n\n\n    for (var i = 1; i <= divisions; i++) {\n\n        point.copy(curve.getPointAt(i / divisions));\n\n        up.set(0, 1, 0);\n\n        forward.subVectors(point, prevPoint).normalize();\n        right.crossVectors(up, forward).normalize();\n        up.crossVectors(forward, right);\n\n        var angle = Math.atan2(forward.x, forward.z);\n\n        quaternion.setFromAxisAngle(up, angle);\n\n        if (i % 2 === 0) {\n            //가운데 노란 레일 양 옆에 노란색 세모 두 개 그리기\n            //drawShape( step, color2 );\n            fromPoint.set(-0.2, -0.02, 0);\n            fromPoint.applyQuaternion(quaternion);\n            fromPoint.add(point);\n\n            toPoint.set(0, -0.135, 0);\n            toPoint.applyQuaternion(quaternion);\n            toPoint.add(point);\n            extrudeShapeSide(step1, fromPoint, toPoint, color2);\n\n            fromPoint.set(0.2, -0.02, 0);\n            fromPoint.applyQuaternion(quaternion);\n            fromPoint.add(point);\n\n            toPoint.set(0, -0.135, 0);\n            toPoint.applyQuaternion(quaternion);\n            toPoint.add(point);\n            extrudeShapeSide(step1, fromPoint, toPoint, color2);\n        }\n\n        //가운데에 노란색 레일 그리기\n        extrudeShape(tube1, offset.set(0, -0.125, 0), color2);\n        //양 옆에 하얀색 레일 그리기\n        extrudeShape(tube2, offset.set(0.2, 0, 0), color1);\n        extrudeShape(tube2, offset.set(-0.2, 0, 0), color1);\n\n        prevPoint.copy(point);\n        prevQuaternion.copy(quaternion);\n\n    }\n\n    // console.log( vertices.length );\n\n    this.addAttribute('position', new THREE.BufferAttribute(new Float32Array(vertices), 3));\n    this.addAttribute('normal', new THREE.BufferAttribute(new Float32Array(normals), 3));\n    this.addAttribute('color', new THREE.BufferAttribute(new Float32Array(colors), 3));\n\n}\n\nRollerCoasterGeometry.prototype = Object.create(THREE.BufferGeometry.prototype);\n\nexport default RollerCoasterGeometry;\n\n\n\n// WEBPACK FOOTER //\n// ./src/roller-coaster/roller-coaster.js","import RollerCoasterLifterGeometry from './geometry';\n\nexport function rollerCoasterLifterMeshFactory(curve, divisions) {\n    const geometry = new RollerCoasterLifterGeometry(curve, divisions);\n    const material = new THREE.MeshPhongMaterial();\n    const mesh = new THREE.Mesh(geometry, material);\n\n    mesh.position.y = 0.1;\n\n    return mesh;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/roller-coaster-lifter/index.js","function RollerCoasterLiftersGeometry(curve, divisions) {\n\n    THREE.BufferGeometry.call(this);\n\n    var vertices = [];\n    var normals = [];\n\n    var quaternion = new THREE.Quaternion();\n\n    var up = new THREE.Vector3(0, 1, 0);\n\n    var point = new THREE.Vector3();\n    var tangent = new THREE.Vector3();\n\n    // shapes\n\n    var tube1 = [\n        new THREE.Vector3(0, 0.05, -0.05),\n        new THREE.Vector3(0, 0.05, 0.05),\n        new THREE.Vector3(0, -0.05, 0)\n    ];\n\n    var tube2 = [\n        new THREE.Vector3(-0.05, 0, 0.05),\n        new THREE.Vector3(-0.05, 0, -0.05),\n        new THREE.Vector3(0.05, 0, 0)\n    ];\n\n    var tube3 = [\n        new THREE.Vector3(0.05, 0, -0.05),\n        new THREE.Vector3(0.05, 0, 0.05),\n        new THREE.Vector3(-0.05, 0, 0)\n    ];\n\n    var vector1 = new THREE.Vector3();\n    var vector2 = new THREE.Vector3();\n    var vector3 = new THREE.Vector3();\n    var vector4 = new THREE.Vector3();\n\n    var normal1 = new THREE.Vector3();\n    var normal2 = new THREE.Vector3();\n    var normal3 = new THREE.Vector3();\n    var normal4 = new THREE.Vector3();\n\n    function extrudeShape(shape, fromPoint, toPoint) {\n\n        for (var j = 0, jl = shape.length; j < jl; j++) {\n\n            var point1 = shape[j];\n            var point2 = shape[( j + 1 ) % jl];\n\n            vector1.copy(point1);\n            vector1.applyQuaternion(quaternion);\n            vector1.add(fromPoint);\n\n            vector2.copy(point2);\n            vector2.applyQuaternion(quaternion);\n            vector2.add(fromPoint);\n\n            vector3.copy(point2);\n            vector3.applyQuaternion(quaternion);\n            vector3.add(toPoint);\n\n            vector4.copy(point1);\n            vector4.applyQuaternion(quaternion);\n            vector4.add(toPoint);\n\n            vertices.push(vector1.x, vector1.y, vector1.z);\n            vertices.push(vector2.x, vector2.y, vector2.z);\n            vertices.push(vector4.x, vector4.y, vector4.z);\n\n            vertices.push(vector2.x, vector2.y, vector2.z);\n            vertices.push(vector3.x, vector3.y, vector3.z);\n            vertices.push(vector4.x, vector4.y, vector4.z);\n\n            //\n\n            normal1.copy(point1);\n            normal1.applyQuaternion(quaternion);\n            normal1.normalize();\n\n            normal2.copy(point2);\n            normal2.applyQuaternion(quaternion);\n            normal2.normalize();\n\n            normal3.copy(point2);\n            normal3.applyQuaternion(quaternion);\n            normal3.normalize();\n\n            normal4.copy(point1);\n            normal4.applyQuaternion(quaternion);\n            normal4.normalize();\n\n            normals.push(normal1.x, normal1.y, normal1.z);\n            normals.push(normal2.x, normal2.y, normal2.z);\n            normals.push(normal4.x, normal4.y, normal4.z);\n\n            normals.push(normal2.x, normal2.y, normal2.z);\n            normals.push(normal3.x, normal3.y, normal3.z);\n            normals.push(normal4.x, normal4.y, normal4.z);\n\n        }\n\n    };\n\n    var fromPoint = new THREE.Vector3();\n    var toPoint = new THREE.Vector3();\n\n    for (var i = 1; i <= divisions; i++) {\n\n        point.copy(curve.getPointAt(i / divisions));\n        tangent.copy(curve.getTangentAt(i / divisions));\n\n        var angle = Math.atan2(tangent.x, tangent.z);\n\n        quaternion.setFromAxisAngle(up, angle);\n\n        //\n\n        if (point.y > 10) {\n\n            fromPoint.set(-0.75, -0.35, 0);\n            fromPoint.applyQuaternion(quaternion);\n            fromPoint.add(point);\n\n            toPoint.set(0.75, -0.35, 0);\n            toPoint.applyQuaternion(quaternion);\n            toPoint.add(point);\n\n            extrudeShape(tube1, fromPoint, toPoint);\n\n            fromPoint.set(-0.7, -0.3, 0);\n            fromPoint.applyQuaternion(quaternion);\n            fromPoint.add(point);\n\n            toPoint.set(-0.7, -point.y, 0);\n            toPoint.applyQuaternion(quaternion);\n            toPoint.add(point);\n\n            extrudeShape(tube2, fromPoint, toPoint);\n\n            fromPoint.set(0.7, -0.3, 0);\n            fromPoint.applyQuaternion(quaternion);\n            fromPoint.add(point);\n\n            toPoint.set(0.7, -point.y, 0);\n            toPoint.applyQuaternion(quaternion);\n            toPoint.add(point);\n\n            extrudeShape(tube3, fromPoint, toPoint);\n\n        } else {\n\n            fromPoint.set(0, -0.2, 0);\n            fromPoint.applyQuaternion(quaternion);\n            fromPoint.add(point);\n\n            toPoint.set(0, -point.y, 0);\n            toPoint.applyQuaternion(quaternion);\n            toPoint.add(point);\n\n            extrudeShape(tube3, fromPoint, toPoint);\n\n        }\n\n    }\n\n    this.addAttribute('position', new THREE.BufferAttribute(new Float32Array(vertices), 3));\n    this.addAttribute('normal', new THREE.BufferAttribute(new Float32Array(normals), 3));\n}\n\nRollerCoasterLiftersGeometry.prototype = Object.create(THREE.BufferGeometry.prototype);\n\nexport default RollerCoasterLiftersGeometry;\n\n\n\n// WEBPACK FOOTER //\n// ./src/roller-coaster-lifter/geometry.js","import RollerCoasterShadowGeometry from './geometry';\n\nexport function rollerCoasterShadowMeshFactory(curve, divisions) {\n    const geometry = new RollerCoasterShadowGeometry(curve, divisions);\n    const material = new THREE.MeshBasicMaterial({\n        color: 0x305000, depthWrite: false, transparent: true\n    });\n    const mesh = new THREE.Mesh(geometry, material);\n\n    mesh.position.y = 0.1;\n\n    return mesh;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/roller-coaster-shadow/index.js","function RollerCoasterShadowGeometry(curve, divisions) {\n\n    THREE.BufferGeometry.call(this);\n\n    var vertices = [];\n\n    var up = new THREE.Vector3(0, 1, 0);\n    var forward = new THREE.Vector3();\n\n    var quaternion = new THREE.Quaternion();\n    var prevQuaternion = new THREE.Quaternion();\n    prevQuaternion.setFromAxisAngle(up, Math.PI / 2);\n\n    var point = new THREE.Vector3();\n\n    var prevPoint = new THREE.Vector3();\n    prevPoint.copy(curve.getPointAt(0));\n    prevPoint.y = 0;\n\n    var vector1 = new THREE.Vector3();\n    var vector2 = new THREE.Vector3();\n    var vector3 = new THREE.Vector3();\n    var vector4 = new THREE.Vector3();\n\n    for (var i = 1; i <= divisions; i++) {\n\n        point.copy(curve.getPointAt(i / divisions));\n        point.y = 0;\n\n        forward.subVectors(point, prevPoint);\n\n        var angle = Math.atan2(forward.x, forward.z);\n\n        quaternion.setFromAxisAngle(up, angle);\n\n        vector1.set(-0.3, 0, 0);\n        vector1.applyQuaternion(quaternion);\n        vector1.add(point);\n\n        vector2.set(0.3, 0, 0);\n        vector2.applyQuaternion(quaternion);\n        vector2.add(point);\n\n        vector3.set(0.3, 0, 0);\n        vector3.applyQuaternion(prevQuaternion);\n        vector3.add(prevPoint);\n\n        vector4.set(-0.3, 0, 0);\n        vector4.applyQuaternion(prevQuaternion);\n        vector4.add(prevPoint);\n\n        vertices.push(vector1.x, vector1.y, vector1.z);\n        vertices.push(vector2.x, vector2.y, vector2.z);\n        vertices.push(vector4.x, vector4.y, vector4.z);\n\n        vertices.push(vector2.x, vector2.y, vector2.z);\n        vertices.push(vector3.x, vector3.y, vector3.z);\n        vertices.push(vector4.x, vector4.y, vector4.z);\n\n        prevPoint.copy(point);\n        prevQuaternion.copy(quaternion);\n\n    }\n\n    this.addAttribute('position', new THREE.BufferAttribute(new Float32Array(vertices), 3));\n\n};\n\nRollerCoasterShadowGeometry.prototype = Object.create(THREE.BufferGeometry.prototype);\n\nexport default RollerCoasterShadowGeometry;\n\n\n\n// WEBPACK FOOTER //\n// ./src/roller-coaster-shadow/geometry.js","export function groundMeshFactory(scene, width, height) {\n    const geometry = new THREE.PlaneBufferGeometry(width, height, 15, 15);\n    geometry.applyMatrix(new THREE.Matrix4().makeRotationX(-Math.PI / 2));\n\n    const positions = geometry.attributes.position.array;\n    const vertex = new THREE.Vector3();\n\n    for (let i = 0; i < positions.length; i += 3) {\n        vertex.fromArray(positions, i);\n        vertex.x += Math.random() * 10 - 5;\n        vertex.z += Math.random() * 10 - 5;\n        const distance = ( vertex.distanceTo(scene.position) / 5 ) - 25;\n        vertex.y = Math.random() * Math.max(0, distance);\n        vertex.toArray(positions, i);\n    }\n    geometry.computeVertexNormals();\n\n    const material = new THREE.MeshLambertMaterial({\n        color: 0x407000\n    });\n\n    const mesh = new THREE.Mesh( geometry, material );\n    scene.add(mesh);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ground/index.js"],"sourceRoot":""}